openapi: 3.1.0
info:
  version: 2.0.0
  title: Monerium API
  description: |
    API for developers to integrate Monerium payments, wallets, and user onboarding functionalities into their applications.

    <p style="background: rgba(255, 165, 0, 0.1); padding: 30px;">
        Endpoints or responses that have not been implemented are marked with <b>WIP</b> (Work In Progress).
    </p>

  termsOfService: "https://monerium.com/policies/business-terms-of-service/"
  contact:
    name: Monerium
    url: "https://monerium.com"
  license:
    name: Apache 2.0
    url: "https://www.apache.org/licenses/LICENSE-2.0.html"
servers:
  - url: "https://api.monerium.app"
    description: "Production API - real money. Stable environment, publicly available. May be lagging behind other environments."
  - url: "https://api.monerium.dev"
    description: "Sandbox API - fake money. Stable environment, publicly available. Parity with production server while simulating periphery services."
paths:
  /:
    get:
      operationId: welcome
      summary: Welcome
      description: Returns a welcome message with a link to documentation and socials.
      parameters: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  hello:
                    type: string
                    example: Welcome to the Monerium API
                  docs:
                    type: string
                    example: "https://monerium.dev"
                  twitter:
                    type: string
                    example: "https://twitter.com/monerium"
        "400":
          description: Bad Request
      security: []
      tags:
        - start
  /auth:
    post:
      operationId: auth
      summary: Authorization
      description: |
        Users must grant your application authorization to access their data.

        This endpoint issues a Temporary Redirect (HTTP 307) to the [Authorization Code Flow](/getting-started#auth-flow) where users can sign up, onboard, connect their wallets and authorize your app to access to their data.

        Use the `Authorization Code Flow client_id` and the other parameters below to redirect users to the Monerium onboarding screen.

        Upon authorization, users will be redirected back to your application `redirect_uri` with an authorization `code` in the query parameters.

        Alternatively a "Sign in with Ethereum" (SIWE) flow can be used for existing Monerium customers. In this case the payload must include a valid
        [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) message and signature. On successful authorization the authorization code is returned at once.

        This authorization code is then used to request an access token via the [token endpoint](/api#operation/auth-token).

        **Additional material**:
        - [Getting started: Authorization Code Flow](/getting-started#auth-flow)
        - [Using the Monerium API: Authentication & Authorization](/api#authorization)
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - allOf:
                    - title: Authorization code flow
                      properties:
                        client_id:
                          $ref: "#/components/schemas/AuthClientID"
                        code_challenge:
                          description: |
                            Generated challenge from the `code_verifier`.
                            You must use the same `code_verifier` when [requesting an access token](/api#operation/auth-token).

                            Read more about [code challenges for PKCE](/api#authorization)
                          type: string
                          example: 9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0
                        code_challenge_method:
                          description: |
                            Method used to generate the challenge (e.g., S256).

                            The PKCE spec defines two methods, S256 and plain. Monerium only supports S256.
                          type: string
                          enum:
                            - S256
                        redirect_uri:
                          description: |
                            The URL to which will redirect the browser after authorization has been granted by the user.

                            **Required if**  there are more then one redirect URL's registered.</br>
                            If present, must match one of the registered redirect URLs exactly.

                            The Authorization Code will be available in the `code` URL parameter, like so: `https://your-app.com/monerium?code=AUTHORIZATION_CODE`

                            Only URLs with the HTTPS-scheme are supported with the exception of http://localhost.
                          type: string
                        state:
                          description: |
                            **Recommended.** The state parameter will be included when redirecting back to your application.
                            It can be used to store request-specific data and/or prevent [CSRF attacks](https://auth0.com/docs/secure/attack-protection/state-parameters).
                          type: string
                        address:
                          description: You can force what address is to be linked in the Authorization Flow.
                          $ref: "#/components/schemas/Address"
                        signature:
                          description: |
                            In redirect to Monerium flow the address in the connect wallet step can be automatically linked by including same the signature used for [Link Address](#operation/link-address). The address will be automatically linked and the user continues to the next step. You must then also include the `address` property. Must include the `0x` prefix.
                          type: string
                        email:
                          description: "You can prefill the email field for login and sign up steps to ensure the user uses the correct email."
                          type: boolean
                          example: true
                        skip_kyc:
                          description: "You can skip the KYC onboarding steps in the Authorization Flow during testing."
                          type: boolean
                          example: true
                        chain:
                          description: You can force what chain the address is linked to in the Authorization Flow.
                          $ref: "#/components/schemas/Chain"
                      required:
                        - client_id
                        - code_challenge
                - allOf:
                    - title: SIWE
                      properties:
                        client_id:
                          $ref: "#/components/schemas/AuthClientID"
                        code_challenge:
                          description: |
                            Generated challenge from the `code_verifier`.
                            You must use the same `code_verifier` when [requesting an access token](/api#operation/auth-token).

                            Read more about [code challenges for PKCE](/api#authorization)
                          type: string
                          example: 9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0
                        code_challenge_method:
                          description: |
                            Method used to generate the challenge (e.g., S256).

                            The PKCE spec defines two methods, S256 and plain. Monerium only supports S256.
                          type: string
                          enum:
                            - S256
                        authentication_method:
                          description: |
                            Authentication method used. The default is to redirect the user to Monerium login screen, where the user can either sign in, or go through the register flow.

                            `siwe` is only applicable for existing Monerium customers who have already linked at least one of their addresses with Monerium.
                          type: string
                          enum:
                            - siwe
                        redirect_uri:
                          description: |
                            The URL to which the redirect of the request successful request is made.

                            **Required if**  there are more than one redirect URL's registered.</br>
                            If present, must match one of the registered redirect URLs exactly.

                            The Authorization Code will be available in the `code` URL parameter, like so: `https://your-app.com/monerium?code=AUTHORIZATION_CODE`

                            Only URLs with the HTTPS-scheme are supported with the exception of http://localhost.
                          type: string
                        message:
                          description: |-
                            An [EIP-4361](https://eips.ethereum.org/EIPS/eip-4361) compatible message.

                            Example message, placeholders must be replaced with actual values:

                            ```
                            example.com wants you to sign in with your Ethereum account:
                            0x5DA1EFC8dB7E32614d7ffb0B8b6bd86e85Ecc743

                            Allow AppName to access my data on Monerium

                            URI: https://example.com/callback
                            Version: 1
                            Chain ID: 1
                            Nonce: 8YOaY6qkvyf7F5lx
                            Issued At: 2024-08-22T10:00:00Z
                            Expiration Time: 2024-08-22T10:05:00Z
                            Resources:
                            - https://monerium.com/siwe
                            - https://example.com/privacy-policy
                            - https://example.com/terms-of-service
                            ```

                            **Placeholders:**
                            - example.com - needs to be replaced with the actual domain of the application
                            - AppName - needs to be replaced with the actual name of the application
                            - 0x5DA1EFC8dB7E32614d7ffb0B8b6bd86e85Ecc743 - needs to be replaced with the actual Ethereum address
                            - https://example.com/callback - needs to be replaced with the actual callback URL configured in the application
                            - https://example.com/privacy-policy - needs to be replaced with the actual privacy policy URL configured for the application
                            - https://example.com/terms-of-service - needs to be replaced with the actual terms of service URL configured for the application

                            **Note:**
                            - expiration-time is optional in the EIP-4361 message spec, but it's required by Monerium
                            - issued-at cannot be in the future when compared to the server time
                            - not-before is not validated against the server time, but when included must be in a valid format
                            - nonce must be unique
                            - chain-id should reference a chain which the end user has linked their address with Monerium
                            - resources is optional in the EIP-4361 message spec, but it's required by Monerium. It must contain the URL to the Monerium SIWE page, and the URLs to the privacy policy and terms of service of the application.
                            - there should be no newline in the end of the message
                          type: string
                        signature:
                          description: |
                            Signature for the SIWE message. Must include the `0x` prefix.
                          type: string
                        state:
                          description: |
                            **Recommended.** The state parameter will be included when redirecting back to your application.
                            It can be used to store request-specific data and/or prevent [CSRF attacks](https://auth0.com/docs/secure/attack-protection/state-parameters).
                          type: string
                      required:
                        - client_id
                        - code_challenge
                        - authentication_method
                        - message
                        - signature
      responses:
        "302":
          description: FOUND
          headers:
            Location:
              description: |
                Redirect URI with either:
                  - authorization code as: `http://localhost:3000/monerium?code=LFG4269`
                  - error as: `http://localhost:3000/monerium?error=invalid_request&error_description=No+such+client+ID`
              schema:
                type: string
        "307":
          description: TEMPORARY REDIRECT
          headers:
            Location:
              description: Uri to authorization flow. Customer has to go through the Monerium onboarding screen and will eventually give the application permission to read their data.
              schema:
                type: string
              example: "https://sandbox.monerium.dev/partners/a15806ac-e6d6-11ed-891c-2ea11c960b3f/auth?client_id=a08bfa22-e6d6-11ed-891c-2ea11c960b3f&code_challenge=9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0&redirect_uri=http%3A%2F%2Flocalhost%3A3000&response_type=code"
        "400":
          description: Bad Request
      security: []
      tags:
        - auth
      x-codeSamples:
        - lang: bash
          label: Authorization code flow
          source: |-
            curl -i 'https://api.monerium.dev/auth' \
            --header 'Content-Type: application/x-www-form-urlencoded' \
            --data-urlencode 'code_challenge=9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0' \
            --data-urlencode 'client_id=a08bfa22-e6d6-11ed-891c-2ea11c960b3f' \
            --data-urlencode 'redirect_uri=http://localhost:3000' \
            --data-urlencode 'code_challenge_method=S256'
        - lang: bash
          label: SIWE
          source: |-
            curl -X POST 'https://api.monerium.dev/auth' \
            --header 'Content-Type: application/x-www-form-urlencoded' \
            --data-urlencode 'client_id=a08bfa22-e6d6-11ed-891c-2ea11c960b3f' \
            --data-urlencode "code_challenge=9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0" \
            --data-urlencode "code_challenge_method=S256" \
            --data-urlencode "redirect_uri=http://localhost:3000" \
            --data-urlencode "authentication_method=siwe" \
            --data-urlencode "signature=0x9ae6f01c9b53847812b2e10b8dbbb159d3b0c73f0e3235041430d7bf0e76172c7e7a9cd5a758f49609d3237f7df923b753bfc73e612208e77680a7a9960e744700" \
            --data-urlencode 'message=example.com wants you to sign in with your Ethereum account:
            0xf9ca5763A2d7a908d9a565567C80C069eCDd1B52

            Allow AppName to access my data on Monerium

            URI: https://example.com/callback
            Version: 1
            Chain ID: 1
            Nonce: 8YOaY6qkvyf7F5lx
            Issued At: 2024-08-24T14:23:00Z
            Expiration Time: 2024-08-24T15:23:00Z
            Resources:
            - https://monerium.com/siwe
            - https://example.com/privacy-policy
            - https://example.com/terms-of-service'
    get:
      operationId: auth-get
      summary: Authorization
      description: |
        Same as [POST /auth](#operation/auth) using a GET request with the same properties as query parameters.
      security: []
      tags:
        - auth
      x-codeSamples:
        - lang: bash
          label: CLI
          source: "curl https://api.monerium.dev/auth?code_challenge=9Y__uhKapn7GO_ElcaQpd8C3hdOyqTzAU4VXyR2iEV0&client_id=a08bfa22-e6d6-11ed-891c-2ea11c960b3f&redirect_uri=http://localhost:3000&code_challenge_method=S256"
  /auth/context:
    get:
      security:
        - BearerAuth: []
      x-codeSamples:
        - lang: bash
          label: curl
          source: |-
            curl https://api.monerium.dev/auth/context \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
      description: |
        The authentication context provides details about the currently authenticated user,
        including the method of authentication, their roles, and information on the profiles they are authorized to access.

        Note that the context is used for every authenticated request. By default results are returned by the caller profile.
        Meaning that applications using client credentials must specify the profile ID in the query parameters to get the
        correct results.
      summary: Context
      operationId: auth-context
      parameters: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/UserContext"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/UnauthorizedError"
      tags:
        - auth
  /auth/signup:
    post:
      operationId: auth-signup
      summary: Sign up
      description: |-
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Create a user and profile by submitting the user's email address
        that your platform has validated. The user can also use the email address
        to generate a password and authenticate to the monerium app.
        The Monerium API will return a profile UUID that you will use to submit
        all of the customer's details.

        Your app will be automatically authorized to access the user data.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: An email address used as username to authenticate.
                  type: string
                  format: email
                  example: user@example.com
              required:
                - email
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    description: The user's email.
                    type: string
                    format: email
                    example: user@example.com
                  profile:
                    description: The UUID for the new profile.
                    example: 4f079ef8-6d26-11eb-9bc8-acde48001122
                    $ref: "#/components/schemas/UUID"
        "304":
          description: |-
            Not modified (user already exists).
            <br /> Use [the authorization flow](#operation/auth) if the user is already a Monerium user. The user is then redirected back to your application, and you can continue with the other operations.
        "403":
          description:
            $ref: "#/components/schemas/ForbiddenPartnerError/description"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenPartnerError"
      security:
        - BearerAuth: []
      tags:
        - auth
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X POST 'https://api.monerium.dev/auth/signup' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "email": "user@example.com"
            }'
  /auth/token:
    post:
      operationId: auth-token
      summary: Access token
      description: |
        API users can authenticate themselves by providing an [OAuth 2.0](https://datatracker.ietf.org/doc/html/rfc6750) access token.

        You get two types of `client_id` when you register your app:

        ![client IDs](/assets/client_ids.png)

        NOTE: You must use the correct `client_id` when picking the authorization flow.
        You get the following error when you are using the wrong client_id for the grant_type:

        ```json
        {
          "code": 400,
          "status": "Bad Request",
          "message": "The client is not authorized to request a token using this method."
        }
        ```

        **Authorization Code Flow and refresh token**

        For mobile and web apps that cannot securely store a client secret without exposing it to the users.

        Your application acquires an authorization `code` through the [PKCE authorization flow](/api#auth-code).
        you can use this authorization code to obtain an `access_token` and a `refresh_token` using `grant_type=authorization_code`.

        The access token can then be used to authenticate all requests for the following hour, after which the token must be refreshed using the `refresh_token` with `grant_type=refresh_token`.

        **Client Credentials Authorization**

        Client credentials can be used when application is acting on its own behalf. When performing requests on behalf of the user, the authorization code flow should be used instead.
        While the client credentials give the application the possibility to access user data today, this will change in the future, and not all endpoints will be available for client credentials.

        Request an `access_token` by using the `client_id` and `client_secret` with `grant_type=client_credentials`.

        The access token can then be used to authenticate all requests for the following hour, after which you can get a new one.
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - allOf:
                    - description: Authorization code flow
                      title: Authorization code flow
                      properties:
                        client_id:
                          $ref: "#/components/schemas/AuthClientID"
                        grant_type:
                          type: string
                          enum:
                            - authorization_code
                        code:
                          description: |
                            The authorization code that was acquired from authorization flow.
                          type: string
                          example: BvTYQprmQzKt8YSn3xsTWQ
                        code_verifier:
                          description: |
                            The randomized string that was used to create the `code_challenge` when a customer/user enters the partner authorization flow.
                            Read more about [code challenges for PKCE](/api#authorization)
                          type: string
                          example: KO2yF8CUSxU8KJepixDmXdiCOFTMMZFLDmVjNd4J2VhbFUSSgU1lXl0aYyWYK8hIZIEH9bEBDeJ78CIuNoeOIcZOybzzqFlIGedtclJ7ZTKF6GmRBZ4fdMvg6OXnf2dl
                        redirect_uri:
                          description: |
                            The same `redirect_uri` that was used to acquire the `authorization_code`.
                          type: string
                          example: "http://localhost:3000/monerium"
                      required:
                        - code
                        - grant_type
                        - client_id
                        - code_verifier
                        - redirect_uri
                - allOf:
                    - description: Fetch updated access token with refresh token.
                      title: Refresh token
                      properties:
                        client_id:
                          $ref: "#/components/schemas/AuthClientID"
                        grant_type:
                          type: string
                          enum:
                            - refresh_token
                        refresh_token:
                          description: |
                            The refresh token acquired from the authorization flow
                          type: string
                      required:
                        - client_id
                        - grant_type
                        - refresh_token
                - allOf:
                    - description: Client credentials.
                      title: Client credentials
                      properties:
                        client_id:
                          $ref: "#/components/schemas/CredentialsClientID"
                        grant_type:
                          type: string
                          enum:
                            - client_credentials
                        client_secret:
                          description: |
                            Secret that was created when the app was registered.
                            Read more: [Client Credentials.](api#auth-client-credentials)
                          type: string
                      required:
                        - client_id
                        - grant_type
                        - client_secret
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccessToken"
        "400":
          description: |
            BAD REQUEST

            <br />
            Note that there are two types of client_id for your app,
            * **Client Credentials Authorization client_id** that you use for `grant_type="client_credentials"`
            * **Authorization Code Flow client_id** that you use for `grant_type="authorization_code"` or `grant_type="refresh_token"`

            <br />

            ![client IDs](/assets/client_ids.png)

            <br />
            You get the following error when you are using the wrong client_id for the grant_type:

            ```json
            {
              "code": 400,
              "status": "Bad Request",
              "message": "The client is not authorized to request a token using this method."
            }
            ```

            Example response when you are using refresh token generated by client credentials:
            ```json
            {
              "code": 400,
              "status": "Bad Request",
              "message": "Client id must be the same from previous token"
            }
            ```

            You should not use refresh token when you can use client credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                wrongClientId:
                  summary: Wrong client ID
                  value:
                    code: 400
                    status: Bad Request
                    message: The client is not authorized to request a token using this method.
                refreshTokenError:
                  summary: Refresh token error
                  value:
                    code: 400
                    status: Bad Request
                    message: Client id must be the same from previous token.
      security: []
      tags:
        - auth
      x-codeSamples:
        - lang: bash
          label: Auth code
          source: |-
            curl --location --request POST 'https://api.monerium.dev/auth/token' \
            --header 'Content-Type: application/x-www-form-urlencoded' \
            --data-urlencode 'grant_type=authorization_code' \
            --data-urlencode 'client_id=a08bfa22-e6d6-11ed-891c-2ea11c960b3f' \
            --data-urlencode 'code=BvTYQprmQzKt8YSn3xsTWQ' \
            --data-urlencode 'code_verifier=KO2yF8CUSxU8KJepixDmXdiCOFTMMZFLDmVjNd4J2VhbFUSSgU1lXl0aYyWYK8hIZIEH9bEBDeJ78CIuNoeOIcZOybzzqFlIGedtclJ7ZTKF6GmRBZ4fdMvg6OXnf2dl' \
            --data-urlencode 'redirect_uri=http://localhost:3000'
        - lang: bash
          label: Refresh token
          source: |-
            curl --location --request POST 'https://api.monerium.dev/auth/token' \
            --header 'Content-Type: application/x-www-form-urlencoded' \
            --data-urlencode 'grant_type=refresh_token' \
            --data-urlencode 'client_id=1337' \
            --data-urlencode 'refresh_token=ay5GEeN4Q8ywCgKykxZN6Q'
        - lang: bash
          label: Client credentials
          source: |-
            curl --location --request POST 'https://api.monerium.dev/auth/token' \
            --header 'Content-Type: application/x-www-form-urlencoded' \
            --data-urlencode 'grant_type=client_credentials' \
            --data-urlencode 'client_id=1b3a17ef-460f-47b0-84c6-4495e18589b3' \
            --data-urlencode 'client_secret=samplepassword'
  /webhooks:
    get:
      operationId: list-subscriptions
      summary: List subscriptions
      description: |
        List all webhook subscriptions for the authenticated user.
        The response includes the details of each subscription, such as the URL, secret, and event types.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  subscriptions:
                    type: array
                    items:
                      $ref: "#/components/schemas/WebhookSubscription"
        "401":
          description: Unauthorized
        "500":
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - webhooks
    post:
      operationId: create-subscription
      summary: Create subscription
      description: |
        Create webhook subscription to receive notifications like [profile update](#operation/webhook-profile-updated) on specified endpoint.
        [Subscription created](#operation/webhook-subscription-created) notification is sent during subscription creation to validate if receiver is able to handle further notifications.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - url
                - secret
              properties:
                url:
                  description: The URL where the notification will be sent.
                  type: string
                  example: "https://yourdomain.com/webhook"
                secret:
                  description: |
                    A secret key used to verify the authenticity of webhook notifications.
                    Each notification is sent with a webhook-signature header, which contains a minified JSON payload encrypted using the secret key via the HMAC-SHA256 scheme.
                    The secret key must be a base64-encoded, random value between 24 and 64 bytes, prefixed with `whsec_`.
                  type: string
                  example: whsec_mUt3nH+3wx/djdHf8RHn9yJMMiAhq10b
                types:
                  description: |
                    An array of event types that the webhook will subscribe to. If not specified, default events types are subscribed to.

                    Default event types:
                    - `iban.updated`
                    - `profile.updated`
                  type: array
                  items:
                    type: string
                    enum:
                      - iban.updated
                      - order.created
                      - order.updated
                      - profile.updated
                  example:
                    - iban.updated
                    - profile.updated
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "500":
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - webhooks
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X POST 'https://api.monerium.dev/webhooks' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Content-Type: application/json" \
            --data-raw '{
              "url": "https://yourdomain.com/webhook",
              "secret": "YOUR_SECRET",
            }'
  /webhooks/{subscription}:
    patch:
      operationId: update-subscription
      summary: Update subscription
      description: |
        Update an existing webhook subscription to change the URL, secret, or event types.
        The updated subscription will be validated by sending a [subscription created](#operation/webhook-subscription-created) notification to the new URL.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: subscription
          in: path
          description: The ID of the webhook subscription
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                state:
                  description: |
                    The state of the webhook subscription. If set to `inactive`, the webhook will not send notifications.
                    If set to `active`, the webhook will send notifications as usual.
                  type: string
                  enum:
                    - active
                    - inactive
                  example: active
                types:
                  description: |
                    An array of event types that the webhook will subscribe to. If not specified, default events types are subscribed to.

                    Default event types:
                    - `iban.updated`
                    - `profile.updated`
                  type: array
                  items:
                    type: string
                    enum:
                      - iban.updated
                      - order.created
                      - order.updated
                      - profile.updated
                  example:
                    - iban.updated
                    - profile.updated
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookSubscription"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "404":
          description: Not Found (subscription does not exist)
        "500":
          description: Internal Server Error
      security:
        - BearerAuth: []
      tags:
        - webhooks

  "/profiles/{profile}/details":
    put:
      operationId: submit-profile-details
      summary: Submit profile details
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Submit the required compliance information to onboard a customer.

        **For KYC Sharing Model:**
        Complete KYC data including details, [form](#operation/submit-profile-form) and [verifications](#operation/submit-profile-verifications) is required.

        **For KYC Reliance Model:**
        Only the details are required. Enhanced due diligence can be added as a [verification](#operation/submit-profile-verifications) when needed.

        **Note:**
        - Ensure all required details are included based on the profile kind ('personal' or 'corporate').
        - Once a profile is approved, you cannot change the profile kind.
        - Profile status notifications are available through [webhooks](#operation/webhook-profile-updated).
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: path
          description: The ID of the profile
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              oneOf:
                - title: Personal
                  properties:
                    personal:
                      description: Details for an individual
                      type: object
                      allOf:
                        - $ref: "#/components/schemas/PersonalDetails"
                        - type: object
                          properties:
                            idDocument:
                              $ref: "#/components/schemas/IdDocument"
                      required:
                        - idDocument
                - title: Corporate
                  properties:
                    corporate:
                      description: Details for a company
                      type: object
                      $ref: "#/components/schemas/CorporateDetails"
      responses:
        "202":
          description: |
            Accepted

            The applicant details have been received and will be processed by Monerium.
            The profile will get an outcome of either approved or rejected once processed.
          content:
            application/json:
              schema:
                type: object
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  firstName: First name is missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description:
            $ref: "#/components/schemas/ForbiddenPartnerError/description"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenPartnerError"
        "409":
          description: |
            Conflict

            This error occurs when the profile details have already been approved and need not be submitted again.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    description: The error code for conflict.
                    type: integer
                    format: int32
                    enum:
                      - 409
                  status:
                    description: The status for conflict.
                    type: string
                    enum:
                      - Conflict
                  message:
                    description: A short message about the error.
                    type: string
                    enum:
                      - The profile details have already been approved and need not be submitted again
      security:
        - BearerAuth: []
      tags:
        - profiles
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X PUT 'https://api.monerium.dev/profiles/30f730fd-e51f-11ed-9e13-cacb9390199c/details' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "personal": {
                "idDocument": {
                  "number": "A1234566788",
                  "kind": "passport"
                },
                "firstName": "Jane",
                "lastName": "Doe",
                "address": "Pennylane 123",
                "postalCode": "7890",
                "city": "Liverpool",
                "country": "FR",
                "countryState": "Merseyside",
                "nationality": "FR",
                "birthday": "1990-05-15"
              }
            }'
  "/profiles/{profile}/form":
    put:
      operationId: submit-profile-form
      summary: Submit profile form
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Submit the banking form for an individual or company.

        **For KYC Sharing Model:**
        Form is required.

        **For KYC Reliance Model:**
        Form is not required.

        **Note:**
        - Ensure all required details are included based on the profile kind ('personal' or 'corporate').
        - Once a profile is approved, you cannot change the profile kind.
        - Profile status notifications are available through [webhooks](#operation/webhook-profile-updated).
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: path
          description: The ID of the profile
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              oneOf:
                - title: Personal
                  properties:
                    personal:
                      description: Form for an individual
                      $ref: "#/components/schemas/PersonalForm"
                - title: Corporate
                  properties:
                    corporate:
                      description: Form for a company
                      $ref: "#/components/schemas/CorporateForm"
      responses:
        "202":
          description: |
            Accepted

            The applicant details have been received and will be processed by Monerium.
            The profile will get an outcome of either approved or rejected once processed.
          content:
            application/json:
              schema:
                type: object
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  firstName: First name is missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description:
            $ref: "#/components/schemas/ForbiddenPartnerError/description"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenPartnerError"
        "409":
          description: |
            Conflict

            This error occurs when the profile details have already been approved and need not be submitted again.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    description: The error code for conflict.
                    type: integer
                    format: int32
                    enum:
                      - 409
                  status:
                    description: The status for conflict.
                    type: string
                    enum:
                      - Conflict
                  message:
                    description: A short message about the error.
                    type: string
                    enum:
                      - The profile details have already been approved and need not be submitted again
      security:
        - BearerAuth: []
      tags:
        - profiles
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X PUT 'https://api.monerium.dev/profiles/30f730fd-e51f-11ed-9e13-cacb9390199c/details' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "personal": {
                "idDocument": {
                  "number": "A1234566788",
                  "kind": "passport"
                },
                "firstName": "Jane",
                "lastName": "Doe",
                "address": "Pennylane 123",
                "postalCode": "7890",
                "city": "Liverpool",
                "country": "FR",
                "countryState": "Merseyside",
                "nationality": "FR",
                "birthday": "1990-05-15"
              }
            }'
  "/profiles/{profile}/verifications":
    put:
      operationId: submit-profile-verifications
      summary: Submit profile verifications
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Submit verifications for an individual or company.

        **For KYC Sharing Model:**
        Verifications are required

        **For KYC Reliance Model:**
        Enhanced due diligence can be submitted as a verification (using `enhancedDueDiligence` kind).

        **Note:**
        - Ensure all required details are included based on the profile kind ('personal' or 'corporate').
        - Once a profile is approved, you cannot change the profile kind.
        - Profile status notifications are available through [webhooks](#operation/webhook-profile-updated).
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: path
          description: The ID of the profile
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              oneOf:
                - title: Personal
                  properties:
                    personal:
                      description: Verifications for an individual
                      $ref: "#/components/schemas/PersonalVerifications"
                - title: Corporate
                  properties:
                    corporate:
                      description: Verifications for a company
                      $ref: "#/components/schemas/CorporateVerifications"
      responses:
        "202":
          description: |
            Accepted

            The applicant details have been received and will be processed by Monerium.
            The profile will get an outcome of either approved or rejected once processed.
          content:
            application/json:
              schema:
                type: object
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  firstName: First name is missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description:
            $ref: "#/components/schemas/ForbiddenPartnerError/description"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenPartnerError"
        "409":
          description: |
            Conflict

            This error occurs when the profile details have already been approved and need not be submitted again.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    description: The error code for conflict.
                    type: integer
                    format: int32
                    enum:
                      - 409
                  status:
                    description: The status for conflict.
                    type: string
                    enum:
                      - Conflict
                  message:
                    description: A short message about the error.
                    type: string
                    enum:
                      - The profile details have already been approved and need not be submitted again
      security:
        - BearerAuth: []
      tags:
        - profiles
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X PUT 'https://api.monerium.dev/profiles/30f730fd-e51f-11ed-9e13-cacb9390199c/details' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "personal": {
                "idDocument": {
                  "number": "A1234566788",
                  "kind": "passport"
                },
                "firstName": "Jane",
                "lastName": "Doe",
                "address": "Pennylane 123",
                "postalCode": "7890",
                "city": "Liverpool",
                "country": "FR",
                "countryState": "Merseyside",
                "nationality": "FR",
                "birthday": "1990-05-15"
              }
            }'
  /profiles:
    get:
      operationId: profiles
      summary: Profiles
      description: Retrieves a list of all profiles that your application has access to.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: state
          in: query
          description: Filter the list on the state of profiles
          required: false
          schema:
            $ref: "#/components/schemas/ProfileState"
        - name: kind
          in: query
          description: Filter the list on the kind of profiles
          required: false
          schema:
            $ref: "#/components/schemas/ProfileKind"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  profiles:
                    $ref: "#/components/schemas/Profiles"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - profiles
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/profiles?state=approved&kind=personal \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  "/profiles/{profile}":
    get:
      operationId: profile
      summary: Profile
      description: Retrieves details about a single profile.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: path
          description: The ID of the profile
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Profile"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - profiles
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/profiles/4f079ef8-6d26-11eb-9bc8-acde48001122 \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  /addresses:
    post:
      operationId: link-address
      summary: Link address
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        A blockchain address, often called a public key or wallet address, is a unique identifier within a blockchain that serves as a destination for sending, receiving, or storing digital assets, such as the EURe onchain fiat token.

        The customer's address is linked to Monerium to request an IBAN for it and perform cross-chain transactions. Linking the address requires a signature to prove that the customer owns the address.

        **Externally Owned Accounts (EOAs)** can generate offchain 65 byte signatures with the user having control of the account via a private key managed by a software wallet like MetaMask or a hardware wallet like Ledger.

        **Smart Contract Accounts (SCAs) or Smart Accounts (SAs)**, are different from EOAs as they are smart contracts (code) immutably linked to the blockchain like the Safe wallet. Monerium supports [ERC-1271: Standard Signature Validation Method for Contracts](https://eips.ethereum.org/EIPS/eip-1271), which can be implemented in two ways.

        1. **Offchain**: The signatures are collected offchain and set in the "signature" field of the request. For multisig wallets, the signatures are concatenated in a 65 byte array.
        2. **Onchain**: The signatures are collected and validated onchain by the smart contract. The "signature" field in the request is set to "0x" and the Monerium infrastructure will verify the onchain with the connected SCA. The SCA emits an event `SignMsg(bytes32 indexed msgHash)` after signing that the Monerium infrastructure validates the signature and completes connecting the wallet.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                profile:
                  description: Profile ID that owns the address.
                  $ref: "#/components/schemas/UUID"
                address:
                  $ref: "#/components/schemas/Address"
                chain:
                  description: The blockchain network where the address is located. Note that allowed values differ between sandbox and production environments.
                  $ref: "#/components/schemas/Chain"
                message:
                  description: Fixed message to be signed with the private key corresponding to the given address. </br></br><strong><code>I hereby declare that I am the address owner.</code></strong>
                  type: string
                  example: I hereby declare that I am the address owner.
                signature:
                  oneOf:
                    - title: EOA address
                      $ref: "#/components/schemas/SignatureEOA"
                    - title: Safe onchain
                      $ref: "#/components/schemas/SignatureSafeOnchain"
                    - title: Safe offchain
                      $ref: "#/components/schemas/SignatureSafeOffchain"
              required:
                - address
                - message
                - chain
                - signature
      responses:
        "201":
          description: |
            **CREATED**

            Monerium was able to validate the signature and link the wallet.
          content:
            application/json:
              schema:
                type: object
        "202":
          description: |
            **ACCEPTED**

            The Monerium infrastructure will validate if the onchain signature has taken place and link the address.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 202
                  status:
                    type: string
                    example: Accepted
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  address: Address missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - addresses
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X POST 'https://api.monerium.dev/addresses' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "profile": "a78d8ff2-e51f-11ed-9e13-cacb9390199c",
              "address": "0x59cFC408d310697f9D3598e1BE75B0157a072407",
              "chain": "gnosis",
              "message": "I hereby declare that I am the address owner.",
              "signature": "0x5rc0b4cb4efbb577cb0c19d1cb23c7cc4912d2138b3267ee4799c88a68e203a5d568bec12f5da2b3a416f9bb03257b472a1605bf489bcdb805c2c029c212d3a5120505f52546da16217f630339cd332d6049f11cf15a1a82939663a58b02d129c40607c0c290ace726c89c35228b6485f5d3796d6c10df5b8a0de196092797bfe7e1f"
            }'
        - lang: JS
          label: JS
          source: |-
            /**
            * This script demonstrates how to add addresses to a Monerium profile
            * and create signatures for EOA, Safe onchain transactions, and Safe offchain messages.
            *
            * Prerequisites:
            * 1. Install Node.js from https://nodejs.org/ (if not already installed).
            * 2. Create a folder for this project and navigate to it in your terminal.
            * 3. Create a file called `reqNewAddressV2.js` and paste this script into it.
            * 4. Install the required npm packages by running:
            *    npm install dotenv @monerium/sdk ethers @safe-global/protocol-kit @safe-global/safe-core-sdk-types @safe-global/api-kit axios
            * 5. Create a `.env` file in your project directory and add your environment variables:
            *    SAFE_ADDRESS=your_safe_address
            *    PRIVATE_KEY=your_private_key
            *    PRIVATE_KEY_2=your_second_private_key (if using Safe)
            *    INFURA_PROJECT_ID=your_infura_project_id
            *    ACCESS_TOKEN=your_access_token
            *    PROFILE_ID=profile_that_owns_the_address
            *    CLIENT_ID=your_client_id
            *    CLIENT_SECRET=your_client_secret
            * 6. Run the script using:
            *    node reqNewAddressV2.js [eoa|safe-onchain|safe-offchain]
            *
            * Note: Replace the placeholder values in the `.env` file with your actual values.
            * Tips
            *  Create a Safe on Sepolia and a Punk wallet (https://punkwallet.io/)
            *  Make the punk wallet a owner of the safe and use that private key
            */

            require("dotenv").config();
            const { MoneriumClient } = require("@monerium/sdk");
            const { ethers } = require('ethers');
            const Safe = require("@safe-global/protocol-kit");
            const SafeApi = require("@safe-global/api-kit").default;
            const { OperationType } = require("@safe-global/safe-core-sdk-types");
            const axios = require("axios");

            // Retrieve environment variables
            const clientId = process.env.CLIENT_ID;
            const clientSecret = process.env.CLIENT_SECRET;
            const profileId = process.env.PROFILE_ID;
            const safeAddress = process.env.SAFE_ADDRESS;
            const privateKey = process.env.PRIVATE_KEY;
            const privateKey2 = process.env.PRIVATE_KEY_2;
            const infuraProjectId = process.env.INFURA_PROJECT_ID;
            const message = "I hereby declare that I am the address owner.";

            // Using the Monerium SDK to handle the requests.
            // https://www.npmjs.com/package/@monerium/sdk
            const monerium = new MoneriumClient({
              environment: "sandbox",
              clientId,
              clientSecret,
            });

            // Get the wallet type from command line arguments
            const walletType = process.argv[2];

            /**
            * The main function that handles the address linking process.
            * Depending on the wallet type, it will create the appropriate signature and link the address to the profile.
            */
            const request = async () => {
              let signature, address;

              switch (walletType) {
                case "eoa":
                  address = process.env.EOA_ADDRESS;
                  signature = await signEOA(message);
                  break;
                case "safe-onchain":
                  address = process.env.SAFE_ADDRESS;
                  signature = await signOnchain(message);
                  break;
                case "safe-offchain":
                  address = process.env.SAFE_ADDRESS;
                  signature = await signOffchain(message);
                  break;
                default:
                  if (!walletType) {
                    console.error(
                      "Wallet type parameter missing. Please use 'eoa','safe-onchain', or 'safe-offchain'. Example: node reqNewAddressV2.js eoa"
                    );
                    return;
                  }
                  console.error(
                    `Unsupported wallet type ${walletType}. Please use 'eoa','safe-onchain', or 'safe-offchain'.`
                  );
                  return;
              }

              if (!signature) {
                console.error("Signature is missing");
                return;
              }

              // get access to Monerium API using client credentials
              await monerium.getAccess();

              // Define the request payload
              const data = {
                profile: profileId,
                message,
                address,
                signature,
                chain: "ethereum",
              };

              console.log("linking wallet", data);

              // Perform the POST request using axios
              axios
                .post('https://api.monerium.dev/addresses', data, {
                  headers: {
                    Authorization: `Bearer ${monerium.bearerProfile.access_token}`,
                    "Accept": "application/vnd.monerium.api-v2+json",
                    "Content-Type": "application/json",
                  },
                })
                .then((response) => {
                  console.log("Monerium Response:", response.data);
                })
                .catch((error) => {
                    console.error('Error:', error.response ? error.response.data : error.message);
                });
            };


            // Function to sign a message using an EOA (Externally Owned Account)
            const signEOA = async (message) => {
              const wallet = new ethers.Wallet(privateKey);
              return await wallet.signMessage(message);
            };

            // Function to sign a message using Safe onchain transactions for a wallet with two owners.
            const signOnchain = async () => {
              // Initialize Safe SDK with provider, signer, and safe address
              let kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey,
                safeAddress,
              });

              // Generate the hash of the message to be signed
              const hash = Safe.hashSafeMessage(message);

              // Get the SignMessageLib contract for the Safe version
              const contract = await Safe.getSignMessageLibContract({
                safeProvider: kit.getSafeProvider(),
                safeVersion: "1.3.0",
              });

              // Encode the transaction data to sign the message
              const txData = contract.encode("signMessage", [hash]);

              // Prepare the transaction payload
              const payload = {
                to: await contract.getAddress(),
                value: "0",
                data: txData,
                operation: OperationType.DelegateCall,
              };

              // Create the transaction
              let tx = await kit.createTransaction({
                transactions: [payload],
              });

              // // Sign the transaction with OWNER_1_ADDRESS
              // // After this, the transaction contains the signature from OWNER_1_ADDRESS
              tx = await kit.signTransaction(tx, Safe.SigningMethod.ETH_SIGN);

              // // Connect OWNER_2_ADDRESS
              kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey2,
                safeAddress,
              });

              // // Sign the transaction with OWNER_2_ADDRESS
              // // After this, the transaction contains the signature from OWNER_1_ADDRESS and OWNER_2_ADDRESS
              tx = await kit.signTransaction(tx, Safe.SigningMethod.ETH_SIGN);

              // Execute the transaction and log the response
              const response = await kit.executeTransaction(tx);
              console.log("signature response:", response);
              return "0x";
            };

            // Function to sign a message using Safe offchain messages for a wallet with two owners.
            const signOffchain = async (message) => {
              // Initialize Safe SDK with provider, signer, and safe address
              let kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey,
                safeAddress,
              });

              // Create a new message object
              let msgSafe = kit.createMessage(message);

              // Sign the message with OWNER 1
              msgSafe = await kit.signMessage(
                msgSafe,
                Safe.SigningMethod.ETH_SIGN,
                safeAddress
              );

              // Sign with OWNER 2
              kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey2,
                safeAddress,
              });

              msgSafe = await kit.signMessage(
                msgSafe,
                Safe.SigningMethod.ETH_SIGN,
                safeAddress
              );

              // get the signature for OWNER 1
              const signature = Array.from(msgSafe.signatures.values())[0];

              // Instantiate the API Kit
              // Use the chainId where you have the Safe account deployed
              const apiKit = new SafeApi({ chainId: 11155111 });

              // Propose the message
              try {
                await apiKit.addMessage(safeAddress, {
                  message,
                  signature: Safe.buildSignatureBytes([signature]),
                });
              } catch (error) {
                const regex = /already exists/;

                if (!error || !regex.test(error.message)) {
                  console.error("Error:", error.message);
                  return;
                } else {
                  console.log(error.message);
                  console.log("Signature 1 has already been added, continuing...");
                }
              }

              // Get the signature from OWNER_2_ADDRESS
              const signatureOwner2 = Array.from(msgSafe.signatures.values())[1];

              const safeMessageHash = await kit.getSafeMessageHash(
                Safe.hashSafeMessage(message)
              );

              // Add signature from OWNER_2_ADDRESS
              try {
                await apiKit.addMessageSignature(
                  safeMessageHash,
                  Safe.buildSignatureBytes([signatureOwner2])
                );
              } catch (error) {
                const regex = /already exists/;

                if (!error || !regex.test(error.message)) {
                  console.error("Error:", error.message);
                  return;
                } else {
                  console.log(error.message);
                  console.log("Signature 2 has already been added, continuing...");
                }
              }

              // Get the message and confirmation status
              const status = await apiKit.getMessage(safeMessageHash);
              if (status?.preparedSignature) {
                return status.preparedSignature;
              }
              return;
            };

            request();
    get:
      operationId: addresses
      summary: Addresses
      description: List of addresses that have been connected. You can filter the addresses by the chain they are connected to.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: query
          description: Return addresses for a given profile ID. By default the caller profile ID is used.
          required: false
          schema:
            $ref: "#/components/schemas/UUID"
        - name: chain
          in: query
          description: Filter the list on the chain
          required: false
          schema:
            $ref: "#/components/schemas/Chain"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  addresses:
                    type: array
                    items:
                      $ref: "#/components/schemas/AddressObject"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - addresses
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/addresses?profile=a78d8ff2-e51f-11ed-9e13-cacb9390199c&chain=ethereum \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  "/addresses/{address}":
    get:
      operationId: address
      summary: Address
      description: Get details for a single address by using the address public key after the address has been successfully linked to Monerium.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: address
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Address"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddressObject"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - addresses
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/addresses/0x59cFC408d310697f9D3598e1BE75B0157a072407 \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  "/balances/{chain}/{address}":
    get:
      operationId: balances
      summary: Balances
      description: Retrieves the balance for an address on a given chain.
      parameters:
        - name: address
          in: path
          description: Address
          required: true
          schema:
            $ref: "#/components/schemas/Address"
        - name: chain
          in: path
          description: Chain name
          required: true
          schema:
            $ref: "#/components/schemas/Chain"
        - name: currency
          in: query
          description: Currency to return the balance for. If not provided `eur` is used. Can be used multiple times to get multiple currencies.
          required: false
          schema:
            $ref: "#/components/schemas/Currency"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Balances"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - addresses
      x-codeSamples:
        - lang: bash
          label: curl
          source: |-
            curl https://api.monerium.dev/balances/ethereum/0x59cFC408d310697f9D3598e1BE75B0157a072407 \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
  /ibans:
    post:
      operationId: request-iban
      summary: Request IBAN
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Create an IBAN for a specified address and chain. All incoming EUR payments will automatically be routed to the linked address on that chain. Any linked address can use this IBAN for outgoing payments.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  $ref: "#/components/schemas/Address"
                chain:
                  $ref: "#/components/schemas/Chain"
              required:
                - address
                - chain
      responses:
        "202":
          description: |
            **ACCEPTED**

            The Monerium infrastructure will provision the IBAN and connect it to the address. This process can take a few seconds.
          content:
            application/json:
              schema:
                type: object
        "304":
          description: |
            **Not modified**

            An IBAN already exists for the profile. Your application can [move the existing IBAN to the address](#operation/move-iban).
          content:
            application/json:
              schema:
                type: object
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  iban: Address missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - ibans
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X POST 'https://api.monerium.dev/ibans' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "address": "0x59cFC408d310697f9D3598e1BE75B0157a072407",
              "chain": "gnosis"
            }'
    get:
      operationId: ibans
      summary: IBANs
      description: "List of IBANs that have been created. You can filter by the address, or the chain they are connected to."
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: profile
          in: query
          description: Return the list for the profile ID. By default the caller profile is used.
          required: false
          schema:
            $ref: "#/components/schemas/UUID"
        - name: chain
          in: query
          description: Filter the list on the chain
          required: false
          schema:
            $ref: "#/components/schemas/Chain"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ibans:
                    type: array
                    items:
                      $ref: "#/components/schemas/IBANObject"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - ibans
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/ibans?profile=a78d8ff2-e51f-11ed-9e13-cacb9390199 \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  "/ibans/{iban}":
    get:
      operationId: iban
      summary: IBAN
      description: Get details for a single IBAN.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: iban
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/IBAN"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/IBANObject"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - ibans
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/ibans/EE73I9684012278810458214196 \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
    patch:
      operationId: move-iban
      summary: Move IBAN
      description: |
        <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
        </span>

        Move an existing IBAN to a specified address an chain. All incoming EUR payments will automatically be routed to the address on that chain.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: iban
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/IBAN"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address:
                  $ref: "#/components/schemas/Address"
                chain:
                  $ref: "#/components/schemas/Chain"
              required:
                - address
                - chain
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                code: 400
                status: Bad Request
                message: Validation errors
                errors:
                  iban: Address missing
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - ibans
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X PATCH 'https://api.monerium.dev/ibans/EE73I9684012278810458214196' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json" \
            --data-raw '{
              "address": "0x59cFC408d310697f9D3598e1BE75B0157a072407",
              "chain": "gnosis"
            }'
  /orders:
    post:
      operationId: post-orders
      summary: Place order
      description: |
        An order represents an instruction to transfer funds from one account to another.
        The transfer can occur within the blockchain ecosystem (cross-chain) or from a blockchain account to a traditional bank account via SEPA.

        An order requires a signature from the wallet owner to authorize the processing of the order.
        The wallet owner signs a specific message to prove ownership and consent for the transaction.

        Attaching a supporting document for amounts above 15,000 EUR is required. Supporting document can be an invoice or an agreement.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewOrder"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
        "202":
          description: |
            **ACCEPTED**

            The order has been accepted and is pending signature confirmation for multi-signature wallets.
            The Monerium infrastructure will verify the onchain signature and process the order once confirmed.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 202
                  status:
                    type: string
                    example: Accepted
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      externalDocs:
        description: Read more about how to upload a file.
        url: /api#tag/files/operation/upload-file
      security:
        - BearerAuth: []
      tags:
        - orders
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl -X POST 'https://api.monerium.dev/orders' \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            --data-raw '{
              "address": "0x5731Ffc2747A25a8132A5d11768F95941Ae9c6ee",
              "currency": "eur",
              "chain": "ethereum",
              "kind": "redeem",
              "amount": "4",
              "counterpart": {
                "identifier": { "standard": "iban", "iban": "EE521273842688571285" },
                "details": {
                  "firstName": "Satoshi",
                  "lastName": "Nakamoto",
                  "country": "FR"
                }
              },
              "message": "Send EUR 4 to EE52...1285 at 2024-06-07T18:25:19.948Z",
              "signature": "0x5rc0b4cb4efbb577cb0c19d1cb23c7cc4912d2138b3267ee4799c88a68e203a5d568bec12f5da2b3a416f9bb03257b472a1605bf489bcdb805c2c029c212d3a5120505f52546da16217f630339cd332d6049f11cf15a1a82939663a58b02d129c40607c0c290ace726c89c35228b6485f5d3796d6c10df5b8a0de196092797bfe7e1f",
              "memo": "Powered by Monerium"
            }'
        - lang: JS
          label: JS
          source: |-
            /**
            * This script demonstrates how to place an order with Monerium API
            * and create signatures for EOA, Safe onchain transactions, and Safe offchain messages.
            *
            * Prerequisites:
            * 1. Install Node.js from https://nodejs.org/ (if not already installed).
            * 2. Create a folder for this project and navigate to it in your terminal.
            * 3. Create a file called `reqNewAddress.js` and paste this script into it.
            * 4. Install the required npm packages by running:
            *    npm install dotenv @monerium/sdk ethers @safe-global/protocol-kit @safe-global/safe-core-sdk-types @safe-global/api-kit
            * 5. Create a `.env` file in your project directory and add your environment variables:
            *    SAFE_ADDRESS=your_safe_address
            *    PRIVATE_KEY=your_private_key
            *    PRIVATE_KEY_2=your_second_private_key (if using Safe)
            *    INFURA_PROJECT_ID=your_infura_project_id
            *    ACCESS_TOKEN=your_access_token
            *    PROFILE_ID=profile_that_owns_the_address
            *    CLIENT_ID=your_client_id
            *    CLIENT_SECRET=your_client_secret
            * 6. Run the script using:
            *    node reqNewAddress.js [eoa|safe-onchain|safe-offchain]
            *
            * Note: Replace the placeholder values in the `.env` file with your actual values.
            * Tips
            *  Create a Safe on Sepolia and a Punk wallet (https://punkwallet.io/)
            *  Make the punk wallet a owner of the safe and use that private key
            */

            require("dotenv").config();
            const { MoneriumClient } = require("@monerium/sdk");
            const { ethers } = require('ethers');
            const Safe = require("@safe-global/protocol-kit");
            const SafeApi = require("@safe-global/api-kit").default;
            const { OperationType } = require("@safe-global/safe-core-sdk-types");

            // Retrieve environment variables
            const safeAddress = process.env.SAFE_ADDRESS;
            const privateKey = process.env.PRIVATE_KEY;
            const privateKey2 = process.env.PRIVATE_KEY_2;
            const infuraProjectId = process.env.INFURA_PROJECT_ID;

            function getRFC3339Time() {
              const now = new Date();
              const future = new Date(now.getTime() + 10 * 60000); // Add 10 minutes
              return future.toISOString();
            }
            // order data
            const amount = "4";
            const iban = "EE521273842688571285";
            const message = `Send EUR ${amount} to ${iban} at ${getRFC3339Time()}`;

            // Using the Monerium SDK to handle the requests.
            // https://www.npmjs.com/package/@monerium/sdk
            const monerium = new MoneriumClient({
              environment: "sandbox",
              clientId,
              clientSecret,
            });

            // Get the wallet type from command line arguments
            const walletType = process.argv[2];

            const request = async () => {
              let signature, address;

              switch (walletType) {
                case "eoa":
                  address = process.env.EOA_ADDRESS;
                  signature = await signEOA(message);
                  break;
                case "safe-onchain":
                  address = process.env.SAFE_ADDRESS;
                  signature = await signOnchain(message);
                  break;
                case "safe-offchain":
                  address = process.env.SAFE_ADDRESS;
                  signature = await signOffchain(message);
                  break;
                default:
                  if (!walletType) {
                    console.error(
                      "Wallet type parameter missing. Please use 'eoa','safe-onchain', or 'safe-offchain'. Example: node reqNewAddress.js eoa"
                    );
                    return;
                  }
                  console.error(
                    `Unsupported wallet type ${walletType}. Please use 'eoa','safe-onchain', or 'safe-offchain'.`
                  );
                  return;
              }

              if (!signature) {
                console.error("Signature is missing");
                return;
              }

              // get access to Monerium API using client credentials
              await monerium.getAccess();

              // Define the request payload
              const data = {
                address,
                currency: "eur",
                chain: "ethereum",
                kind: "redeem",
                amount,
                counterpart: {
                  identifier: {
                    standard: "iban",
                    iban,
                  },
                  details: {
                    firstName: "Satoshi",
                    lastName: "Nakamoto",
                    country: "FR",
                  },
                },
                message,
                signature,
                memo: "uuu jeeeeee",
              };

              console.log("creating order", data);

              try {
                const response = await monerium.placeOrder(data, profileId);
                console.log("success", response);
              } catch (error) {
                console.error(error);
                return;
              }
            };

            // Function to sign a message using an EOA (Externally Owned Account)
            const signEOA = async (message) => {
              const wallet = new ethers.Wallet(privateKey);
              return await wallet.signMessage(message);
            };

            // Function to sign a message using Safe onchain transactions for a wallet with two owners.
            const signOnchain = async () => {
              // Initialize Safe SDK with provider, signer, and safe address
              let kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey,
                safeAddress,
              });

              // Generate the hash of the message to be signed
              const hash = Safe.hashSafeMessage(message);

              // Get the SignMessageLib contract for the Safe version
              const contract = await Safe.getSignMessageLibContract({
                safeProvider: kit.getSafeProvider(),
                safeVersion: "1.3.0",
              });

              // Encode the transaction data to sign the message
              const txData = contract.encode("signMessage", [hash]);

              // Prepare the transaction payload
              const payload = {
                to: await contract.getAddress(),
                value: "0",
                data: txData,
                operation: OperationType.DelegateCall,
              };

              // Create the transaction
              let tx = await kit.createTransaction({
                transactions: [payload],
              });

              // // Sign the transaction with OWNER_1_ADDRESS
              // // After this, the transaction contains the signature from OWNER_1_ADDRESS
              tx = await kit.signTransaction(tx, Safe.SigningMethod.ETH_SIGN);

              // // Connect OWNER_2_ADDRESS
              kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey2,
                safeAddress,
              });

              // // Sign the transaction with OWNER_2_ADDRESS
              // // After this, the transaction contains the signature from OWNER_1_ADDRESS and OWNER_2_ADDRESS
              tx = await kit.signTransaction(tx, Safe.SigningMethod.ETH_SIGN);

              // Execute the transaction and log the response
              const response = await kit.executeTransaction(tx);
              console.log("signature response:", response);
              return "0x";
            };

            // Function to sign a message using Safe offchain messages for a wallet with two owners.
            const signOffchain = async (message) => {
              // Initialize Safe SDK with provider, signer, and safe address
              let kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey,
                safeAddress,
              });

              // Create a new message object
              let msgSafe = kit.createMessage(message);

              // Sign the message with OWNER 1
              msgSafe = await kit.signMessage(
                msgSafe,
                Safe.SigningMethod.ETH_SIGN,
                safeAddress
              );

              // Sign with OWNER 2
              kit = await Safe.default.init({
                provider: `https://sepolia.infura.io/v3/${infuraProjectId}`,
                signer: privateKey2,
                safeAddress,
              });

              msgSafe = await kit.signMessage(
                msgSafe,
                Safe.SigningMethod.ETH_SIGN,
                safeAddress
              );

              // get the signature for OWNER 1
              const signature = Array.from(msgSafe.signatures.values())[0];

              // Instantiate the API Kit
              // Use the chainId where you have the Safe account deployed
              const apiKit = new SafeApi({ chainId: 11155111 });

              // Propose the message
              try {
                await apiKit.addMessage(safeAddress, {
                  message,
                  signature: Safe.buildSignatureBytes([signature]),
                });
              } catch (error) {
                const regex = /already exists/;

                if (!error || !regex.test(error.message)) {
                  console.error("Error:", error.message);
                  return;
                } else {
                  console.log(error.message);
                  console.log("Signature 1 has already been added, continuing...");
                }
              }

              // Get the signature from OWNER_2_ADDRESS
              const signatureOwner2 = Array.from(msgSafe.signatures.values())[1];

              const safeMessageHash = await kit.getSafeMessageHash(
                Safe.hashSafeMessage(message)
              );

              // Add signature from OWNER_2_ADDRESS
              try {
                await apiKit.addMessageSignature(
                  safeMessageHash,
                  Safe.buildSignatureBytes([signatureOwner2])
                );
              } catch (error) {
                const regex = /already exists/;

                if (!error || !regex.test(error.message)) {
                  console.error("Error:", error.message);
                  return;
                } else {
                  console.log(error.message);
                  console.log("Signature 2 has already been added, continuing...");
                }
              }

              // Get the message and confirmation status
              const status = await apiKit.getMessage(safeMessageHash);
              if (status?.preparedSignature) {
                return status.preparedSignature;
              }
              return;
            };

            request();
    get:
      operationId: orders
      summary: Orders
      description: |
        Retrieves all orders for the caller profile.
        Query parameters can be used to filter and sort the result.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: address
          in: query
          description: Get all orders belonging to a specific blockchain address.
          schema:
            example: "0x798728D5410aB4FB49d2C277A49baC5048aB43ca"
            $ref: "#/components/schemas/Address"
        - name: txHash
          in: query
          description: The blockchains transaction hash.
          schema:
            type: string
            example: "0x692ff12125b71c167b3ea90bddb3b28edd60941851cb0cdd852cc3b6d79311cd"
        - name: profile
          in: query
          description: The profile ID which the order belongs to. By default the caller profile ID is used.
          schema:
            example: 123e4567-e89b-12d3-a456-426614174000
            $ref: "#/components/schemas/UUID"
        - name: memo
          in: query
          schema:
            $ref: "#/components/schemas/Memo"
        - name: state
          in: query
          description: |
            Get all orders in a particular state:

            - `pending`: The order is being processed (e.g., review, minting/burning tokens, or sending/receiving SEPA payment).
            - `processed`: The order has been completed successfully.
            - `rejected`: The order was rejected, possibly due to compliance reasons or insufficient funds.
          schema:
            type: string
            enum:
              - pending
              - processed
              - rejected
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  orders:
                    type: array
                    items:
                      $ref: "#/components/schemas/Order"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - orders
      x-codeSamples:
        - lang: bash
          label: curl
          source: |-
            curl https://api.monerium.dev/orders \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  "/orders/{orderId}":
    get:
      operationId: order
      summary: Order
      description: |
        Retrieve the details of an existing order. Supply the unique order ID from either an order creation or the order list, and Monerium will return the corresponding order information
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: orderId
          in: path
          description: The ID of the order
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - orders
      x-codeSamples:
        - lang: bash
          label: curl
          source: |-
            curl https://api.monerium.dev/orders/b48f7ca4-e51f-11ed-9e13-cacb9390199c \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
  /files:
    post:
      operationId: upload-file
      summary: File upload
      description: Upload documents for KYC onboarding and order support.
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  description: |
                    Path to the file.

                    Maximum length filename: **100**</br>
                    Maximum size: **5 MB**</br>
                    Allowed file types: **PDF**, **JPEG**</br>
                  type: string
                  example: doc.pdf
                  title: file
              required:
                - file
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    description: File ID
                    type: string
                    example: 3ebc51a8-044f-11ed-8b1f-4a76448b7b21
                  name:
                    description: File name
                    type: string
                    example: doc.pdf
                  type:
                    description: File type
                    type: string
                    example: application/pdf
                  size:
                    description: File size
                    type: integer
                    example: 595101
                  hash:
                    type: string
                    example: f2d8e62b44c59079536910eeb595f91833874a44aafc42c73c80588d91e7796b
                  meta:
                    type: object
                    properties:
                      uploadedBy:
                        description: User ID of the uploader
                        type: string
                        example: 6d510620-f6c9-11ec-81c1-62a51ab3b761
                      createdAt:
                        type: string
                        format: date
                        example: "2024-07-15T15:03:11.990387Z"
                      updatedAt:
                        type: string
                        format: date
                        example: "2024-07-15T15:03:11.990387Z"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - files
      x-codeSamples:
        - lang: bash
          label: CLI
          source: "curl --form file='@doc.pdf' https://api.monerium.dev/files"
  /tokens:
    get:
      operationId: tokens
      summary: Tokens
      description: "Information about the emoney tokens with tickers, symbols, decimals, token contract address and the chain information, we currently support Ethereum, Polygon and Gnosis.</br></br> Token addresses and details here: [/tokens/](/tokens)"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tokens"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
      security:
        - BearerAuth: []
      tags:
        - start
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/tokens \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
  /signatures:
    get:
      operationId: get-signatures
      summary: Get pending signatures
      description: |
        Returns pending signatures for the authenticated user.
        Accepts filtering by address, chain, and pending signature kind (order, linkAddress).

        Note: This endpoint is not optimal for users with many addresses as it may have performance implications.
      parameters:
        - $ref: "#/components/parameters/AcceptHeaderV2"
        - name: address
          in: query
          required: false
          description: Filter by blockchain address
          schema:
            $ref: "#/components/schemas/Address"
        - name: chain
          in: query
          required: false
          description: Filter by blockchain network
          schema:
            $ref: "#/components/schemas/Chain"
        - name: kind
          in: query
          required: false
          description: Filter by signature request kind
          schema:
            type: string
            enum:
              - linkAddress
              - order
        - name: profile
          in: query
          required: false
          description: UUID of the profile (defaults to authenticated user's default profile)
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        "200":
          description: Successful response with pending signatures
          headers:
            X-Total-Count:
              description: Total number of signatures returned
              schema:
                type: integer
          content:
            application/json:
              schema:
                type: object
                properties:
                  pending:
                    type: array
                    items:
                      $ref: "#/components/schemas/PendingSignature"
                  total:
                    type: integer
                    description: Total number of pending signatures
              examples:
                orderSignature:
                  summary: Order signature example
                  value:
                    pending:
                      - id: "550e8400-e29b-41d4-a716-446655440000"
                        kind: "order"
                        chain: "ethereum"
                        address: "0x1234567890123456789012345678901234567890"
                        amount: "100.50"
                        counterpart:
                          identifier:
                            standard: "iban"
                            iban: "GB33BUKB20201555555555"
                          details:
                            name: "John Doe"
                        currency: "eur"
                        createdAt: "2024-01-15T10:30:00Z"
                    total: 1
                linkAddressSignature:
                  summary: Link address signature example
                  value:
                    pending:
                      - kind: "linkAddress"
                        chain: "polygon"
                        address: "0xabcdefabcdefabcdefabcdefabcdefabcdefabcd"
                        createdAt: "2024-01-15T09:15:00Z"
                    total: 1
                emptyResult:
                  summary: No pending signatures
                  value:
                    pending: []
                    total: 0
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: UNAUTHORIZED
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnauthorizedError"
        "403":
          description: FORBIDDEN
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenError"
        "404":
          description: Not found - profile or signatures not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
      tags:
        - signatures
      x-codeSamples:
        - lang: bash
          label: CLI
          source: |-
            curl https://api.monerium.dev/signatures \
            -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
            -H "Accept: application/vnd.monerium.api-v2+json"
components:
  parameters:
    AcceptHeaderV2:
      name: Accept
      in: header
      required: true
      description: Accept header to specify API version 2
      schema:
        type: string
        example: application/vnd.monerium.api-v2+json
  schemas:
    Address:
      description: The public key of the blockchain account.
      type: string
      example: "0x59cFC408d310697f9D3598e1BE75B0157a072407"
      pattern: "^0x[0-9a-fA-F]{40}$"
    Currency:
      description: "Three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in lowercase."
      type: string
      enum:
        - eur
        - usd
        - gbp
        - isk
    BankAccount:
      description: "Used for generic bank account details, when IBAN is not available."
      type: object
      required:
        - standard
        - accountNumber
        - address
      properties:
        standard:
          description: "The standard of the bank account. This is used to identify generic bank account."
          type: string
          example: account
          enum:
            - account
        accountNumber:
          description: The account number of the bank account.
          type: string
          example: "1234567890"
        address:
          description: Address of the bank account holder.
          type: string
          example: "1725 Slough Avenue in Scranton, PA"
        bic:
          description: The BIC (Bank Identifier Code) of the bank.
          type: string
          example: "DEUTDEDBFRA"
    Balances:
      type: object
      properties:
        address:
          $ref: "#/components/schemas/Address"
        chain:
          $ref: "#/components/schemas/Chain"
        balances:
          description: The amount owned of currency
          type: array
          items:
            type: object
            properties:
              currency:
                $ref: "#/components/schemas/Currency"
              amount:
                description: The amount of currency.
                type: string
                example: "123.45"
    Chain:
      example: ethereum
      oneOf:
        - title: Ethereum
          type: string
          enum:
            - ethereum
          description: Ethereum mainnet
        - title: Gnosis
          type: string
          enum:
            - gnosis
          description: Gnosis Chain
        - title: Polygon
          type: string
          enum:
            - polygon
          description: Polygon PoS
        - title: Arbitrum
          type: string
          enum:
            - arbitrum
          description: Arbitrum
        - title: Linea
          type: string
          enum:
            - linea
          description: Linea
        - title: Base
          type: string
          enum:
            - base
          description: Base
        - title: Noble
          type: string
          enum:
            - noble
          description: Noble
        - title: Sepolia
          type: string
          enum:
            - sepolia
          description: Sepolia testnet
        - title: Chiado
          type: string
          enum:
            - chiado
          description: Chiado Gnosis testnet
        - title: Amoy
          type: string
          enum:
            - amoy
          description: Amoy Polygon testnet
        - title: Arbitrum Sepolia
          type: string
          enum:
            - arbitrumsepolia
          description: Arbitrum Sepolia testnet
        - title: Linea Sepolia
          type: string
          enum:
            - lineasepolia
          description: Linea Sepolia testnet
        - title: Base Sepolia
          type: string
          enum:
            - basesepolia
          description: Base Sepolia testnet
        - title: Noble Grand
          type: string
          enum:
            - grand
          description: Noble Grand testnet
    ChainMultiSig:
      allOf:
        - $ref: "#/components/schemas/Chain"
    CountryCode:
      description: "Two-letter country code [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)"
      type: string
      example: FR
      maxLength: 2
      minLength: 2
    IBAN:
      description: "The IBAN is a unique identifier for a bank account across different countries and includes a two-letter country code, two check digits, and a number of alphanumeric characters. It may include spaces for readability but should be stored without spaces."
      type: string
      example: EE127310138155512606682602
      pattern: '^(?:[A-Z]{2}[0-9]{2}(?:\s?[0-9A-Z]{4}){1,7}\s?[0-9A-Z]{1,4})$'
    Memo:
      description: |
        UTF-8 Payment reference / memo. Can be used as filter parameters when querying
        orders.
      type: string
      example: Powered by Monerium
      maxLength: 140
      minLength: 5
    ReferenceNumber:
      description: |
        UTF-8 Payment reference. Structured identifier for a transaction or order, typically used for automatic payment reconciliation
      type: string
      example: "RF123456789"
      maxLength: 35
      minLength: 0
    SignatureEOA:
      description: The signature hash of signing the `message` with the private key associated with the given address.
      type: string
      example: 0x5rc0b4cb4efbb577cb0c19d1cb23c7cc4912d2138b3267ee4799c88a68e203a5d568bec12f5da2b3a416f9bb03257b472a1605bf489bcdb805c2c029c212d3a5120505f52546da16217f630339cd332d6049f11cf15a1a82939663a58b02d129c40607c0c290ace726c89c35228b6485f5d3796d6c10df5b8a0de196092797bfe7e1f
      pattern: "^0x[0-9a-fA-F]{130}$"
    SignatureSafeOnchain:
      description: |
        For Safe onchain signatures, your app needs to ensure that [the signature transaction is created](https://docs.safe.global/sdk/protocol-kit/guides/signatures/messages#on-chain-messages).

        Setting the signature to `0x` let's the Monerium API know that this is an onchain signature.

        The Monerium API supports [ERC-1271](https://eips.ethereum.org/EIPS/eip-1271) and will verify the signature using the wallet's `isValidSignature(messageHash, '0x')` method.

        The Safe wallet has a predefined threshold for the number of signatures required to authorize a transaction.
        For example, if the Safe wallet has 5 owners and a threshold of 3, at least 3 valid signatures are required to proceed with the transaction.

        The Monerium API will continue to verify if the signature has been confirmed for up to 5 days.
      type: string
      example: 0x5rc0b4cb4efbb577cb0c19d1cb23c7cc4912d2138b3267ee4799c88a68e203a5d568bec12f5da2b3a416f9bb03257b472a1605bf489bcdb805c2c029c212d3a5120505f52546da16217f630339cd332d6049f11cf15a1a82939663a58b02d129c40607c0c290ace726c89c35228b6485f5d3796d6c10df5b8a0de196092797bfe7e1f
      enum:
        - 0x
      pattern: ^0x$
    SignatureSafeOffchain:
      description: |-
        The Safe wallet supports [offchain signatures](https://docs.safe.global/sdk/protocol-kit/guides/signatures/messages#off-chain-messages).
        The Safe wallet has a predefined threshold for the number of signatures required to authorize a transaction. For example, if the Safe wallet has 5 owners and a threshold of 3, at least 3 valid signatures are required to proceed with the transaction. Your app needs to ensure that the signature is created and confirmed by enough owners before performing the request.
        The Monerium API supports [ERC-1271](https://eips.ethereum.org/EIPS/eip-1271) and will verify the signature using the wallet's `isValidSignature(messageHash, signature)` method.
      type: string
      example: 0x5rc0b4cb4efbb577cb0c19d1cb23c7cc4912d2138b3267ee4799c88a68e203a5d568bec12f5da2b3a416f9bb03257b472a1605bf489bcdb805c2c029c212d3a5120505f52546da16217f630339cd332d6049f11cf15a1a82939663a58b02d129c40607c0c290ace726c89c35228b6485f5d3796d6c10df5b8a0de196092797bfe7e1f
    AddressObject:
      type: object
      properties:
        profile:
          description: The profile id that owns the address
          $ref: "#/components/schemas/UUID"
        address:
          $ref: "#/components/schemas/Address"
        chains:
          description: list of chains that this address has been connected to
          type: array
          items:
            $ref: "#/components/schemas/Chain"
    IBANObject:
      type: object
      properties:
        iban:
          $ref: "#/components/schemas/IBAN"
        name:
          description: The name of the IBAN owner. This can be a corporate or an individual.
          type: string
          example: Jane Doe
        bic:
          description: |
            The Bank Identifier Code (BIC) is an 8 or 11-character code used to identify banks and financial institutions worldwide.
            It includes a bank code, country code, location code, and optional branch code.
          type: string
          example: EAPFESM2XXX
        profile:
          description: The profile id that owns the IBAN
          $ref: "#/components/schemas/UUID"
        address:
          description: The address that this IBAN is connected to
          $ref: "#/components/schemas/Address"
        chain:
          description: The chain that this IBAN is connected to
          $ref: "#/components/schemas/Chain"
    NewOrder:
      type: object
      properties:
        id:
          description: The unique identifier of the order.
          $ref: "#/components/schemas/UUID"
        address:
          description: The address to redeem from. Can be any Monerium linked address.
          $ref: "#/components/schemas/Address"
        currency:
          $ref: "#/components/schemas/Currency"
        chain:
          $ref: "#/components/schemas/Chain"
        kind:
          description: Identifier specifying the nature of the order. </br></br> Redeem order is when tokens are burned on blockchain and sent to bank.
          type: string
          enum:
            - redeem
        amount:
          description: "The quantity of money sent, represented as a series of digits, possibly followed by a decimal point and up to two additional digits. The amount must be a non-negative value."
          type: string
          example: "1000"
        counterpart:
          $ref: "#/components/schemas/Counterpart"
        message:
          description: "A string message that the wallet owner must sign to authorize the processing of the order. This signed message verifies the consent of the wallet owner, ensuring that the transaction can proceed securely and legitimately."
          oneOf:
            - title: IBAN
              description: |
                For outgoing SEPA payments, the message is composed as such:

                <code>Send \<CURRENCY\> \<AMOUNT\> to \<IBAN\> at \<TIMESTAMP\></code>
                </br>

                Where:

                * `CURRENCY`: The order currency, the three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in uppercase.
                * `AMOUNT`: The order amount.
                * `IBAN`: The counterpart IBAN in either a) uppercase with no spaces or b) in shortened format
                * `TIMESTAMP`: the timestamp in [RFC3339](https://tools.ietf.org/html/rfc3339) format accurate to the minute. The timestamp must be within 5 minutes of the current time or any time in the future.

                While full IBAN length may vary, the shortened format is always 11 characters, where the first four and last four characters are shown, the rest are replaced with three dots: `EE12...2602`.

                Example with full IBAN:

                <code>Send EUR 1.23 to EE127310138155512606682602 at 2024-07-12T12:02:49Z</code>

                Example with shortened IBAN:

                <code>Send EUR 1.23 to EE12...2602 at 2024-07-12T12:02:49Z</code>
              type: string
              example: "Send EUR 1 to EE127310138155512606682602 at 2024-07-12T12:02:49Z"
            - title: Cross-chain transaction
              description: |
                For Cross-chain transaction, the message is composed as such:

                <code>Send \<CURRENCY\> \<AMOUNT\> to \<ADDRESS\> on \<CHAIN\> at \<TIMESTAMP\></code>
                </br>

                Where:

                * `CURRENCY`: The order currency, the three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html), in uppercase.
                * `AMOUNT`: The order amount.
                * `ADDRESS`: the recipient blockchain address `counterpart.identifier.address`.
                * `CHAIN`: the recipient blockchain `counterpart.identifier.chain`.
                * `TIMESTAMP`: the timestamp in [RFC3339](https://tools.ietf.org/html/rfc3339) format accurate to the minute. The timestamp must be within 5 minutes of the current time or any time in the future.

                Example:

                <code>Send EUR 1.23 to 0x4B4c34f35b0Bb9Af56418FAdD4677ce45ADF7760 on ethereum at 2024-07-12T12:02:49Z</code>
              type: string
              pattern: '^Send\s([A-Z]{3})\s(\d+(\.\d{1,2})?)\sto\s([A-Z]{2}\d{2}\s?([A-Z0-9]{4}\s?){1,7}[A-Z0-9]{1,4})\sat\s(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}Z)$'
              example: "Send EUR 1 to EE127310138155512606682602 at 2024-07-12T12:02:49Z"
        signature:
          oneOf:
            - title: EOA address
              $ref: "#/components/schemas/SignatureEOA"
            - title: Safe onchain
              $ref: "#/components/schemas/SignatureSafeOnchain"
            - title: Safe offchain
              $ref: "#/components/schemas/SignatureSafeOffchain"
        memo:
          $ref: "#/components/schemas/Memo"
        referenceNumber:
          $ref: "#/components/schemas/ReferenceNumber"
        supportingDocumentId:
          description: "File ID, required for orders with amount greater or equal to 15,000."
          example: 3ebc51a8-044f-11ed-8b1f-4a76448b7b21
          $ref: "#/components/schemas/UUID"
      required:
        - address
        - currency
        - chain
        - kind
        - amount
        - signature
        - message
        - counterpart
    Order:
      type: object
      properties:
        id:
          allOf:
            - $ref: "#/components/schemas/UUID"
            - description: The ID of the order.
              example: 8c0fd7b1-01da-11ed-89c1-52c47a86c354
        kind:
          description: |-
            Issue orders are created when payment is received and the token, e.g. EURe, is minted to the specified address and chain.
            Redeem orders are created for sending outgoing payments. The tokens, e.g. EURe, are burned from the specified address and chain and then sent to the Counterpart.
          type: string
          example: redeem
          enum:
            - issue
            - redeem
        profile:
          description: Unique identifier of the profile involved in the order.
          example: 312c5cc4-4b06-11ed-a6cf-bac9bf26c37c
          $ref: "#/components/schemas/UUID"
        address:
          example: "0x798728D5410aB4FB49d2C277A49baC5048aB43ca"
          $ref: "#/components/schemas/Address"
        chain:
          $ref: "#/components/schemas/Chain"
        currency:
          $ref: "#/components/schemas/Currency"
        amount:
          description: The order amount.
          type: string
          example: "999"
        counterpart:
          $ref: "#/components/schemas/CounterpartResponse"
        memo:
          $ref: "#/components/schemas/Memo"
        referenceNumber:
          $ref: "#/components/schemas/ReferenceNumber"
        state:
          description: |
            The state of the order:

            - `placed`: The order has been created but not yet processed.
            - `pending`: The order is awaiting fulfillment (e.g., review, minting/burning tokens, or sending/receiving SEPA payment).
            - `processed`: The order has been completed successfully.
            - `rejected`: The order was rejected, possibly due to compliance reasons or insufficient funds.
          type: string
          example: rejected
          enum:
            - placed
            - pending
            - processed
            - rejected
        meta:
          type: object
          properties:
            placedAt:
              description: "When was the order placed. The timestamp in [RFC3339](https://tools.ietf.org/html/rfc3339) format. It includes the date, time to the second, and optional fractional seconds, followed by 'Z' to indicate UTC time."
              $ref: "#/components/schemas/TimeStamp"
            processedAt:
              description: "When was the order processed. Only visible when the order has been processed. The timestamp in [RFC3339](https://tools.ietf.org/html/rfc3339) format. It includes the date, time to the second, and optional fractional seconds, followed by 'Z' to indicate UTC time."
              $ref: "#/components/schemas/TimeStamp"
            rejectedReason:
              description: Message stating why the order was rejected.  Only visible when the order has been rejected.
              type: string
              example: "Declined due to insufficient funds."
            supportingDocumentId:
              description: The UUID of an File ID.
              type: string
              example: 3ebc51a8-044f-11ed-8b1f-4a76448b7b21
          required:
            - placedAt
      required:
        - id
        - kind
        - profile
        - address
        - chain
        - currency
        - amount
        - counterpart
        - memo
        - state
        - meta
      title: Order
    AccessToken:
      type: object
      properties:
        access_token:
          description: |
            The token that must be used to authenticate API requests.
            Example of using the access token in a request header:
            ```
            Authorization: Bearer EoWmpc2uSZar6h2bKgh
            ```
          type: string
        expires_in:
          description: The duration in seconds for which the access token is valid.
          type: integer
          example: 3600
        refresh_token:
          description: A token used to obtain a new access token after the current one expires.
          type: string
          example: cowYzCowQxGPUl4p15iwKA
        token_type:
          description: "The type of token returned. In this case, it is always 'Bearer'."
          type: string
          example: Bearer
      example:
        access_token: EoWmpc2uSZar6h2bKgh
        expires_in: 3600
        refresh_token: cowYzCowQxGPUl4p15iwKA
        token_type: Bearer
    Profiles:
      type: array
      items:
        $ref: "#/components/schemas/Profile"
    Profile:
      type: object
      properties:
        id:
          description: Unique identifier of the profile. The Profile ID is the main identifier used to represent ownership of other API resources
          type: string
          example: 4f079ef8-6d26-11eb-9bc8-acde48001122
        kind:
          $ref: "#/components/schemas/ProfileKind"
        name:
          description: The Profile name. This can be a corporate or an individual.
          type: string
          example: Jane Doe
        state:
          $ref: "#/components/schemas/ProfileState"
    Tokens:
      type: array
      items:
        type: object
        properties:
          currency:
            $ref: "#/components/schemas/Currency"
          ticker:
            description: The traditional currency abbreviation.
            enum:
              - EUR
              - GBP
              - USD
              - ISK
          symbol:
            description: The official symbol of the token used in DeFi platforms.
            enum:
              - EURe
              - GBPe
              - USDe
              - ISKe
          chain:
            $ref: "#/components/schemas/Chain"
          address:
            description: The address of the token.
            type: string
            example: "0x905419e7a1f96a973ab8988ba19c84135c6f7122"
          decimals:
            description: Number of decimals used in the asset.
            type: string
      example:
        - currency: eur
          ticker: EUR
          symbol: EURe
          chain: ethereum
          address: "0x3231cb76718cdef2155fc47b5286d82e6eda273f"
          decimals: 18
        - currency: gbp
          ticker: GBP
          symbol: GBPe
          chain: ethereum
          address: "0x7ba92741bf2a568abc6f1d3413c58c6e0244f8fd"
          decimals: 18
        - currency: isk
          ticker: ISK
          symbol: ISKe
          chain: ethereum
          address: "0xc642549743a93674cf38d6431f75d6443f88e3e2"
          decimals: 18
        - currency: usd
          ticker: USD
          symbol: USDe
          chain: ethereum
          address: "0xbc5142e0cc5eb16b47c63b0f033d4c2480853a52"
          decimals: 18
        - currency: eur
          ticker: EUR
          symbol: EURe
          chain: polygon
          address: "0x18ec0A6E18E5bc3784fDd3a3634b31245ab704F6"
          decimals: 18
        - currency: gbp
          ticker: GBP
          symbol: GBPe
          chain: polygon
          address: "0x75792CBDb361d80ba89271a079EfeE62c29FA324"
          decimals: 18
        - currency: isk
          ticker: ISK
          symbol: ISKe
          chain: polygon
          address: "0xf1bBf27A9D659D326efBfa5D284EBaeFB803983D"
          decimals: 18
        - currency: usd
          ticker: USD
          symbol: USDe
          chain: polygon
          address: "0x64E97c1a6535afD4a313eF46F88A64a34250B719"
          decimals: 18
    Counterpart:
      description: "The counterpart represents the other party involved in a financial transaction, such as the recipient of a payment or the payer. The counterpart can be either an individual or a corporate. It includes identifying information such as account details, name, and country."
      type: object
      properties:
        identifier:
          description: Counterpart account information.
          oneOf:
            - title: IBAN
              type: object
              required:
                - standard
                - iban
              properties:
                standard:
                  description: An International Bank Account Number (IBAN) is used to send and receive payments from bank accounts. The IBAN may contain spaces.
                  type: string
                  example: iban
                  enum:
                    - iban
                iban:
                  $ref: "#/components/schemas/IBAN"
            - title: Cross-chain
              type: object
              required:
                - standard
                - address
                - chain
              properties:
                standard:
                  description: Used to send cross chain transaction from one wallet to another on a different blockchain.
                  type: string
                  example: chain
                  enum:
                    - chain
                address:
                  $ref: "#/components/schemas/Address"
                chain:
                  $ref: "#/components/schemas/Chain"
        details:
          description: Details about the counterpart that can be either a corporate or an individual.
          oneOf:
            - title: Individual
              type: object
              description: The counterpart is an individual.
              required:
                - firstName
                - lastName
                - country
              properties:
                firstName:
                  description: The first name of the individual. The middle name(s) can also be included here.
                  type: string
                  example: Satoshi
                  minLength: 2
                lastName:
                  description: The last name of the individual.
                  type: string
                  example: Nakamoto
                  minLength: 2
                country:
                  description: "The two-letter country code (ISO 3166-1 alpha-2) representing the country where the counterpart lives. For more information, refer to the [ISO 3166-1 alpha-2 standard](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)."
                  $ref: "#/components/schemas/CountryCode"
            - title: Corporation
              type: object
              description: Only one naming method is required. Either companyName or firstName and lastName
              required:
                - companyName
                - country
              properties:
                companyName:
                  description: Used for outgoing payments when the recipient is a company
                  type: string
                  example: Monerium
                country:
                  description: "The two-letter country code (ISO 3166-1 alpha-2) representing the country where the counterpart is located. For more information, refer to the [ISO 3166-1 alpha-2 standard](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)."
                  $ref: "#/components/schemas/CountryCode"
      required:
        - identifier
        - details
    CounterpartResponse:
      description: "The counterpart represents the other party involved in a financial transaction, such as the recipient of a payment or the payer. The counterpart can be either an individual or a corporate. It includes identifying information such as account details, name, and country."
      type: object
      properties:
        identifier:
          description: Counterpart account information.
          oneOf:
            - title: IBAN
              type: object
              required:
                - standard
                - iban
              properties:
                standard:
                  description: An International Bank Account Number (IBAN) is used to send and receive payments from bank accounts. The IBAN may contain spaces.
                  type: string
                  example: iban
                  enum:
                    - iban
                iban:
                  $ref: "#/components/schemas/IBAN"
            - title: Cross-chain
              type: object
              required:
                - standard
                - address
                - chain
              properties:
                standard:
                  description: Used to send cross chain transaction from one wallet to another on a different blockchain.
                  type: string
                  example: chain
                  enum:
                    - chain
                address:
                  $ref: "#/components/schemas/Address"
                chain:
                  $ref: "#/components/schemas/Chain"
            - title: Bank Account
              $ref: "#/components/schemas/BankAccount"
        details:
          description: Details about the counterpart. Empty for cross-chain orders.
          oneOf:
            - title: Redeem orders for individuals
              type: object
              description: The counterpart is an individual.
              required:
                - firstName
                - lastName
                - country
              properties:
                firstName:
                  description: The first name of the individual. The middle name(s) can also be included here.
                  type: string
                  example: Satoshi
                  minLength: 2
                lastName:
                  description: The last name of the individual.
                  type: string
                  example: Nakamoto
                  minLength: 2
                country:
                  description: "The two-letter country code (ISO 3166-1 alpha-2) representing the country where the counterpart lives. For more information, refer to the [ISO 3166-1 alpha-2 standard](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)."
                  $ref: "#/components/schemas/CountryCode"
            - title: Redeem orders for corporations
              type: object
              required:
                - companyName
                - country
              properties:
                companyName:
                  description: Used for outgoing payments when the recipient is a company
                  type: string
                  example: Monerium
                country:
                  description: "The two-letter country code (ISO 3166-1 alpha-2) representing the country where the counterpart is located. For more information, refer to the [ISO 3166-1 alpha-2 standard](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)."
                  $ref: "#/components/schemas/CountryCode"
            - title: Issue orders
              type: object
              required:
                - name
              properties:
                name:
                  description: The sender name. This can be a corporate or an individual.
                  type: string
                  example: Monerium
      required:
        - identifier
    Error:
      description: The generic Error object structure for API error responses.
      type: object
      properties:
        code:
          description: The HTTP error code associated with the error.
          type: integer
          format: int32
        status:
          description: A brief status message corresponding to the error code.
          type: string
        message:
          description: A detailed message explaining the error.
          type: string
        errors:
          type: object
          additionalProperties:
            type: string
      required:
        - code
        - status
        - message
    UnauthorizedError:
      description: |
        This error occurs when the user is not authenticated.
        Example response:
        ```json
        {
          "code": 401,
          "status": "Unauthorized",
          "message": "Not authenticated"
        }
        ```
      type: object
      allOf:
        - $ref: "#/components/schemas/Error"
        - type: object
          properties:
            code:
              description: The error code for unauthorized access.
              type: integer
              format: int32
              enum:
                - 401
            status:
              description: The status message for unauthorized access.
              type: string
              enum:
                - Unauthorized
            message:
              description: A short message about the error.
              type: string
              enum:
                - Not authenticated
    ForbiddenError:
      description: |
        This error occurs when the user does not have permission to access the requested resource.
        Example response:
        ```json
        {
          "code": 403,
          "status": "Forbidden",
          "message": "User user@example.com is forbidden"
        }
        ```
      type: object
      properties:
        code:
          description: The error code for forbidden access.
          type: integer
          format: int32
          enum:
            - 403
        status:
          description: The status for forbidden access.
          type: string
          enum:
            - Forbidden
        message:
          description: A short message about the error.
          type: string
          example: User user@example.com is forbidden
    ForbiddenPartnerError:
      description: |
        FORBIDDEN

        This error occurs when your app does not have permission to access the requested endpoint.
        You will need to contact the Monerium team to get access to this feature.
      type: object
      properties:
        code:
          description: The error code for forbidden access.
          type: integer
          format: int32
          enum:
            - 403
        status:
          description: The status for forbidden access.
          type: string
          enum:
            - Forbidden
        message:
          description: A short message about the error.
          type: string
          example: Application from partner partner@example.com is not allowed to submit KYC data
    UUID:
      type: string
      format: UUID
      example: a78d8ff2-e51f-11ed-9e13-cacb9390199c
      pattern: "^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    AuthClientID:
      description: |
        The [Authorization Code Flow](/getting-started#auth-flow) client ID of your application.
      type: string
      $ref: "#/components/schemas/UUID"
    CredentialsClientID:
      description: |
        The [Client Credentials Authorization](api#auth-client-credentials) client ID of your application.
      type: string
      $ref: "#/components/schemas/UUID"
    PersonalDetails:
      description: "Personal information such as name, address, nationality, and date of birth."
      type: object
      properties:
        firstName:
          description: First name
          type: string
          example: Jane
        lastName:
          description: Last name
          type: string
          example: Doe
        address:
          description: Street and building number where the person lives.
          type: string
          example: Pennylane 123
        postalCode:
          description: Postal code where the person lives.
          type: string
          example: "7890"
        city:
          description: City where the person lives.
          type: string
          example: Liverpool
        country:
          description: "Two-letter country code [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) where the person lives"
          example: GB
          $ref: "#/components/schemas/CountryCode"
        countryState:
          description: State/County where the person lives.
          type: string
          example: Merseyside
        nationality:
          description: "Two-letter country code [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) for the person's nationality."
          example: GB
          $ref: "#/components/schemas/CountryCode"
        birthday:
          description: |
            The person's birthday in the format "YYYY-MM-DD" where:

            * YYYY = date-fullyear  = 4DIGIT
            * MM = date-month = 2DIGIT; 01-12
            * DD = date-mday = 2DIGIT; 01-28, 01-29, 01-30, 01-31 based on month/year.
          type: string
          format: date
          example: "1990-05-15"
          pattern: '^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|1\d|2\d|3[01])$'
      required:
        - firstName
        - lastName
        - address
        - postalCode
        - city
        - country
        - nationality
        - birthday
    PersonalForm:
      description: |
        Personal form for capturing user details, including occupation, profession, fund origins, and financial information.

        The following mappings between codes and their corresponding values are used:

        **Occupation Codes:**
        - `OCCUPATION_STUDENT`: Student
        - `OCCUPATION_EMPLOYED`: Employed
        - `OCCUPATION_SELF_EMPLOYED`: Self Employed
        - `OCCUPATION_UNEMPLOYED`: Unemployed
        - `OCCUPATION_RETIRED`: Retired

        **Profession Codes:**
        - `PROF_ACCOUNTANCY`: Accountancy
        - `PROF_ADMINISTRATIVE`: Administrative
        - `PROF_AGRICULTURE`: Agriculture
        - `PROF_ARTS_ENTERTAINMENT_MEDIA`: Arts/Entertainment/Media
        - `PROF_BROKER_DEALER`: Broker/Dealer
        - `PROF_CATERING_HOSPITALITY_TOURISM`: Catering/Hospitality/Tourism
        - `PROF_CHARITY`: Charity (Non-profit organization)
        - `PROF_CONSTRUCTION_REAL_ESTATE`: Construction/Real Estate
        - `PROF_DEALER_HIGH_VALUE_GOODS`: Dealer in high value goods
        - `PROF_DEALER_PRECIOUS_METALS`: Dealer in precious metals
        - `PROF_EDUCATION`: Education
        - `PROF_EMERGENCY_SERVICES`: Emergency services
        - `PROF_EXTRACTIVE_INDUSTRY`: Extractive industry
        - `PROF_FINANCIAL_SERVICES_BANKING`: Financial services - Banking
        - `PROF_FINANCIAL_SERVICES_INSURANCE`: Financial services - Insurance
        - `PROF_FINANCIAL_SERVICES_OTHER`: Financial services - Other
        - `PROF_FINANCIAL_SERVICES_PRIVATE_BANKING`: Financial services - Private Banking
        - `PROF_GAMBLING`: Gambling
        - `PROF_GOVERNMENT`: Government
        - `PROF_HEALTH_CARE_MEDICAL`: Health care/Medical
        - `PROF_INFORMATION_TECHNOLOGY`: Information technology
        - `PROF_LEGAL`: Legal
        - `PROF_MANUFACTURING`: Manufacturing
        - `PROF_MARKETING`: Marketing
        - `PROF_MILITARY_ARMS_DEFENSE`: Military / Arms trade / Defence
        - `PROF_MONEY_SERVICE_BUSINESS`: Money service business
        - `PROF_PENSIONER`: Pensioner
        - `PROF_PUBLIC_PROCUREMENT`: Public procurement
        - `PROF_RETAIL_SALES`: Retail sales

        **Fund Origins Codes:**
        - `FUND_ORIGIN_SALARY`: Salary
        - `FUND_ORIGIN_DIVIDENDS`: Dividends
        - `FUND_ORIGIN_INHERITANCE`: Inheritance
        - `FUND_ORIGIN_SAVINGS`: Savings
        - `FUND_ORIGIN_INVESTMENT`: Investment
        - `FUND_ORIGIN_GIFT`: Gift
        - `FUND_ORIGIN_MINING`: Mining
        - `FUND_ORIGIN_REAL_ESTATE`: Real estate
        - `FUND_ORIGIN_LOAN`: Loan

        **Annual Income Codes:**
        - `ANNUAL_INCOME_UNDER_10K`: Under 10,000
        - `ANNUAL_INCOME_10K_TO_50K`: From 10,000 to 50,000
        - `ANNUAL_INCOME_50K_TO_150K`: From 50,000 to 150,000
        - `ANNUAL_INCOME_150K_TO_300K`: From 150,000 to 300,000
        - `ANNUAL_INCOME_OVER_300K`: More than 300,000

        **Monthly Turnover Codes:**
        - `TURNOVER_UNDER_10K`: Under 10,000
        - `TURNOVER_10K_TO_50K`: From 10,000 to 50,000
        - `TURNOVER_50K_TO_150K`: From 50,000 to 150,000
        - `TURNOVER_150K_TO_500K`: From 150,000 to 500,000
        - `TURNOVER_OVER_500K`: More than 500,000

        **Monthly Transaction Count Codes:**
        - `TRANSACTION_COUNT_LESS_THAN_5`: Less than 5
        - `TRANSACTION_COUNT_5_TO_50`: 5 to 50
        - `TRANSACTION_COUNT_50_TO_100`: 50 to 100
        - `TRANSACTION_COUNT_100_TO_200`: 100 to 200
        - `TRANSACTION_COUNT_OVER_200`: More than 200

        **Activity Codes:**
        - `ACTIVITY_COMMERCE_SELLING`: Commerce Selling
        - `ACTIVITY_COMMERCE_BUYING`: Commerce Buying
        - `ACTIVITY_INVESTING_CRYPTO`: Investing in Crypto
        - `ACTIVITY_OTHER`: Other
      type: object
      properties:
        occupation:
          description: The occupation code representing the individual's current employment status.
          type: string
          example: OCCUPATION_EMPLOYED
          enum:
            - OCCUPATION_STUDENT
            - OCCUPATION_EMPLOYED
            - OCCUPATION_SELF_EMPLOYED
            - OCCUPATION_UNEMPLOYED
            - OCCUPATION_RETIRED
        profession:
          description: The profession code representing the individual's professional field.
          type: string
          example: PROF_ACCOUNTANCY
          enum:
            - PROF_ACCOUNTANCY
            - PROF_ADMINISTRATIVE
            - PROF_AGRICULTURE
            - PROF_ARTS_MEDIA
            - PROF_BROKER_DEALER
            - PROF_CATERING_HOSPITALITY
            - PROF_CHARITY
            - PROF_CONSTRUCTION_REAL_ESTATE
            - PROF_DEALER_HIGH_VALUE_GOODS
            - PROF_DEALER_PRECIOUS_METALS
            - PROF_EDUCATION
            - PROF_EMERGENCY_SERVICES
            - PROF_EXTRACTIVE_INDUSTRY
            - PROF_FIN_SERVICES_BANKING
            - PROF_FIN_SERVICES_INSURANCE
            - PROF_FIN_SERVICES_OTHER
            - PROF_FIN_SERVICES_PRIVATE_BANKING
            - PROF_GAMBLING
            - PROF_GOVERNMENT
            - PROF_HEALTHCARE_MEDICAL
            - PROF_INFORMATION_TECHNOLOGY
            - PROF_LEGAL
            - PROF_MANUFACTURING
            - PROF_MARKETING
            - PROF_MILITARY_DEFENCE
            - PROF_MONEY_SERVICE_BUSINESS
            - PROF_PENSIONER
            - PROF_PUBLIC_PROCUREMENT
            - PROF_RETAIL_SALES
        fundOrigin:
          description: The code representing the origins of the individual's funds.
          type: string
          example: FUND_ORIGIN_SALARY
          enum:
            - FUND_ORIGIN_SALARY
            - FUND_ORIGIN_DIVIDENDS
            - FUND_ORIGIN_INHERITANCE
            - FUND_ORIGIN_SAVINGS
            - FUND_ORIGIN_INVESTMENT
            - FUND_ORIGIN_GIFT
            - FUND_ORIGIN_MINING
            - FUND_ORIGIN_REAL_ESTATE
            - FUND_ORIGIN_LOAN
        annualIncome:
          description: The code representing the individual's annual income range.
          type: string
          example: ANNUAL_INCOME_UNDER_10K
          enum:
            - ANNUAL_INCOME_UNDER_10K
            - ANNUAL_INCOME_10K_TO_50K
            - ANNUAL_INCOME_50K_TO_150K
            - ANNUAL_INCOME_150K_TO_300K
            - ANNUAL_INCOME_OVER_300K
        monthlyTurnover:
          description: The code representing the individual's monthly turnover range.
          type: string
          example: TURNOVER_UNDER_10K
          enum:
            - TURNOVER_UNDER_10K
            - TURNOVER_10K_TO_50K
            - TURNOVER_50K_TO_150K
            - TURNOVER_150K_TO_500K
            - TURNOVER_OVER_500K
        monthlyTransactionCount:
          description: The code representing the number of transactions the individual makes each month.
          type: string
          example: TRANSACTION_COUNT_LESS_THAN_5
          enum:
            - TRANSACTION_COUNT_LESS_THAN_5
            - TRANSACTION_COUNT_5_TO_50
            - TRANSACTION_COUNT_50_TO_100
            - TRANSACTION_COUNT_100_TO_200
            - TRANSACTION_COUNT_OVER_200
        activities:
          description: List of codes representing the individual's financial activities.
          type: array
          items:
            type: string
            enum:
              - ACTIVITY_COMMERCE_SELLING
              - ACTIVITY_COMMERCE_BUYING
              - ACTIVITY_INVESTING_CRYPTO
              - ACTIVITY_OTHER
        activityOther:
          description: A description of the other activity if the code `ACTIVITY_OTHER` is chosen.
          type: string
          example: farming airdrops
        publicFunction:
          description: Indicates whether the individual holds a politically exposed person (PEP) status.
          type: boolean
        fundOwner:
          description: Indicates whether the individual is the owner of the funds.
          type: boolean
      required:
        - occupation
        - profession
        - fundOrigin
        - annualIncome
        - monthlyTurnover
        - monthlyTransactionCount
        - activities
        - publicFunction
        - fundOwner
    PersonalVerifications:
      description: |
        A list of verifications required for personal onboarding. Each type of verification in the list must be completed to ensure compliance.
        Verification can have multiple documents (e.g. two sides of an ID document, selfie).
        The same file ID can be referenced in multiple verifications (e.g. the same document contains facial similarity and device/location metadata).

        The types of verifications with required documents:
        - **idDocument**: Verification of the individual's identity document. Required documents:
            - either `passport` or `nationalIdentityCard` (both sides)
            - `selfie`
        - **facialSimilarity**: Verification that the individual's face matches the provided identity document. Required documents:
          - `checkpdf` - PDF report of facial similarity check
        - **proofOfResidency**: Verification of the individual's residential address.
          - `checkpdf` - PDF document that proves the address (e.g. invoice)
        - **deviceIntelligence**: Analysis of the individual's device, location, IP address to detect potential frauds. Required data (one of):
          - `checkpdf` - PDF report of device and location metadata
          - `report` object.
      type: array
      items:
        type: object
        properties:
          kind:
            description: The type of the verification.
            type: string
            enum:
              - idDocument
              - facialSimilarity
              - proofOfResidency
              - deviceIntelligence
              - enhancedDueDiligence
          documents:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                side:
                  type: string
                  enum:
                    - back
                    - front
                fileId:
                  $ref: "#/components/schemas/UUID"
        required:
          - kind
          - documents
    CorporateDetails:
      description: |
        Company information such as name, registration number, address, and details of representatives, final beneficiaries, and directors.
      type: object
      properties:
        name:
          description: Name of the company.
          type: string
          example: Jane Doe's things
        registrationNumber:
          description: The company's registration number.
          type: string
          example: 123456
        registrationDate:
          description: The company's registration date.
          type: string
          format: date
          example: "2022-02-01"
          pattern: '^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|1\d|2\d|3[01])$'
        vatNumber:
          description: The company's VAT number.
          type: string
          example: 1234
        website:
          description: The company's website.
          type: string
          example: "https://janedoe.com/"
        address:
          description: Street and building number where the corporate is located.
          type: string
          example: Pennylane 123
        postalCode:
          description: Postal code where the corporate is located.
          type: string
          example: "7890"
        city:
          description: City where the corporate is located.
          type: string
          example: Liverpool
        country:
          description: "Two-letter country code [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) where the corporate is located"
          example: GB
          $ref: "#/components/schemas/CountryCode"
        countryState:
          description: State/County where the corporate is located.
          type: string
          example: Merseyside
        representatives:
          description: List of individuals representing the company and authorized to act on its behalf.
          type: array
          items:
            type: object
            required:
              - idDocument
            properties:
              idDocument:
                $ref: "#/components/schemas/IdDocument"
            allOf:
              - $ref: "#/components/schemas/PersonalDetails"
        finalBeneficiaries:
          description: List of beneficial owner that owns 25% or more in a company.
          type: array
          items:
            type: object
            required:
              - ownershipPercentage
            properties:
              ownershipPercentage:
                description: Ownership in % that is between 25% and 100%.
                type: string
                format: number
                example: 25
                maximum: 100
                minimum: 25
                pattern: '^(?:25(?:\.0{1,2})?|2[6-9](?:\.\d{1,2})?|[3-9]\d(?:\.\d{1,2})?|100(?:\.0{1,2})?)$'
            allOf:
              - $ref: "#/components/schemas/PersonalDetails"
        directors:
          description: List of Individual who has powers to legally bind the company (power of procuration).
          type: array
          items:
            type: object
            allOf:
              - $ref: "#/components/schemas/PersonalDetails"
      required:
        - name
        - registrationNumber
        - address
        - postalCode
        - city
        - country
        - countryState
        - representatives
        - finalBeneficiaries
        - directors
    CorporateForm:
      description: |
        Corporate form for capturing company details, including service, purpose, activity, fund origins, and financial information.

        The following mappings between codes and their corresponding values are used:

        **Legal Form Codes:**
        - `LEGAL_FORM_PUBLIC_LIMITED`: Public limited
        - `LEGAL_FORM_PRIVATE_LIMITED`: Private limited
        - `LEGAL_FORM_PARTNERSHIPS`: Partnerships
        - `LEGAL_FORM_SOLE_TRADERS_PROPRIETORSHIPS`: Sole traders/proprietorships
        - `LEGAL_FORM_PUBLIC_AUTHORITIES`: Public authorities
        - `LEGAL_FORM_NON_PROFIT`: Non profit
        - `LEGAL_FORM_BRANCHES`: Branches
        - `LEGAL_FORM_OTHER`: Other

        **Purpose Codes:**
        - `PURPOSE_COLLECTING_PAYMENTS`: Collecting payments for goods or services
        - `PURPOSE_PAYING_FOR_GOODS_SERVICES`: Paying for goods or services
        - `PURPOSE_BUY_SELL_CRYPTO`: Buy and/or sell cryptocurrencies
        - `PURPOSE_ENGAGE_IN_DEFI`: Engage in DeFi (any sub-category)
        - `PURPOSE_OTHER`: Other

        **Activity Codes:**
        - `ACTIVITY_ACCOMMODATION_FOOD_TRAVEL`: Accommodation/Food/Travel services
        - `ACTIVITY_ACCOUNTING_LEGAL_CONSULTANCY`: Accounting/Legal/Consultancy
        - `ACTIVITY_ADULT_ENTERTAINMENT`: Adult entertainment
        - `ACTIVITY_ADVERTISING_MARKETING`: Advertising/Marketing
        - `ACTIVITY_AGRICULTURE_FORESTRY_FISHING`: Agriculture/Forestry/Fishing
        - `ACTIVITY_ARTS_ENTERTAINMENT_RECREATION`: Arts/Entertainment/Recreation
        - `ACTIVITY_CHARITY`: Charity
        - `ACTIVITY_CONSTRUCTION`: Construction
        - `ACTIVITY_DEALER_HIGH_VALUE_GOODS`: Dealer in high value goods/metals/stones
        - `ACTIVITY_ECOMMERCE`: Ecommerce
        - `ACTIVITY_EDUCATION`: Education
        - `ACTIVITY_EXTRACTIVE_INDUSTRY`: Extractive industry
        - `ACTIVITY_GAMBLING`: Gambling
        - `ACTIVITY_HEALTH_SERVICES`: Health services
        - `ACTIVITY_MANUFACTURING`: Manufacturing
        - `ACTIVITY_MARKETPLACE`: Marketplace
        - `ACTIVITY_MEDIA_PUBLISHING`: Media/Publishing
        - `ACTIVITY_MULTI_LEVEL_MARKETING`: Multi-level marketing
        - `ACTIVITY_PERSONAL_INVESTMENT`: Personal investment
        - `ACTIVITY_PUBLIC_SECTOR`: Public sector
        - `ACTIVITY_REAL_ESTATE`: Real estate
        - `ACTIVITY_RETAIL_WHOLESALE_TRADE`: Retail/Wholesale trade
        - `ACTIVITY_SOCIAL_WORK`: Social work
        - `ACTIVITY_SOFTWARE_TECHNOLOGY`: Software/Technology
        - `ACTIVITY_TELECOM`: Telecom
        - `ACTIVITY_TRANSPORTATION_STORAGE`: Transportation/Storage
        - `ACTIVITY_UTILITIES`: Utilities
        - `ACTIVITY_CRYPTO_SERVICES`: Crypto services (any sub-category)
        - `ACTIVITY_FINANCIAL_INSTITUTION`: Financial institution (any sub-category)
        - `ACTIVITY_OTHER`: Other

        **Fund Origin Codes:**
        - `FUND_ORIGIN_REVENUE_FROM_OPERATIONS`: Revenue from operations
        - `FUND_ORIGIN_PROFIT_DIVIDENDS`: Profit or Dividends
        - `FUND_ORIGIN_LOAN`: Loan
        - `FUND_ORIGIN_INVESTMENTS_SHAREHOLDERS`: Investments from shareholders
        - `FUND_ORIGIN_CUSTOMER_FUNDS`: Customer funds
        - `FUND_ORIGIN_FUNDS_THIRD_PARTIES`: Funds owned by third parties

        **Monthly Turnover Codes:**
        - `TURNOVER_UNDER_100K`: Under 100,000
        - `TURNOVER_100K_TO_250K`: Between 100,000 and 250,000
        - `TURNOVER_OVER_250K`: More than 250,000

        **Monthly Transaction Count Codes:**
        - `TRANSACTION_COUNT_UNDER_100`: Under 100
        - `TRANSACTION_COUNT_100_TO_250`: Between 100 and 250
        - `TRANSACTION_COUNT_OVER_250`: More than 250
      type: object
      properties:
        service:
          description: A brief description of the company's services.
          type: string
        legalForm:
          description: The legal form of the company.
          type: string
          example: LEGAL_FORM_PRIVATE_LIMITED
          enum:
            - LEGAL_FORM_PUBLIC_LIMITED
            - LEGAL_FORM_PRIVATE_LIMITED
            - LEGAL_FORM_PARTNERSHIPS
            - LEGAL_FORM_SOLE_TRADERS_PROPRIETORSHIPS
            - LEGAL_FORM_PUBLIC_AUTHORITIES
            - LEGAL_FORM_NON_PROFIT
            - LEGAL_FORM_BRANCHES
            - LEGAL_FORM_OTHER
        purpose:
          description: The code representing the primary purpose of the company.
          type: string
          example: PURPOSE_COLLECT_PAYMENTS
          enum:
            - PURPOSE_COLLECT_PAYMENTS
            - PURPOSE_PAY_FOR_SERVICES
            - PURPOSE_BUY_SELL_CRYPTO
            - PURPOSE_ENGAGE_IN_DEFI
            - PURPOSE_OTHER
        activity:
          description: The code representing the company's main activity.
          type: string
          example: ACTIVITY_ECOMMERCE
          enum:
            - ACTIVITY_ACCOMMODATION_FOOD_TRAVEL
            - ACTIVITY_ACCOUNTING_LEGAL_CONSULTANCY
            - ACTIVITY_ADULT_ENTERTAINMENT
            - ACTIVITY_ADVERTISING_MARKETING
            - ACTIVITY_AGRICULTURE_FORESTRY_FISHING
            - ACTIVITY_ARTS_ENTERTAINMENT_RECREATION
            - ACTIVITY_CHARITY
            - ACTIVITY_CONSTRUCTION
            - ACTIVITY_DEALER_HIGH_VALUE_GOODS
            - ACTIVITY_ECOMMERCE
            - ACTIVITY_EDUCATION
            - ACTIVITY_EXTRACTIVE_INDUSTRY
            - ACTIVITY_GAMBLING
            - ACTIVITY_HEALTH_SERVICES
            - ACTIVITY_MANUFACTURING
            - ACTIVITY_MARKETPLACE
            - ACTIVITY_MEDIA_PUBLISHING
            - ACTIVITY_MULTI_LEVEL_MARKETING
            - ACTIVITY_PERSONAL_INVESTMENT
            - ACTIVITY_PUBLIC_SECTOR
            - ACTIVITY_REAL_ESTATE
            - ACTIVITY_RETAIL_WHOLESALE
            - ACTIVITY_SOCIAL_WORK
            - ACTIVITY_SOFTWARE_TECHNOLOGY
            - ACTIVITY_TELECOM
            - ACTIVITY_TRANSPORT_STORAGE
            - ACTIVITY_UTILITIES
            - ACTIVITY_CRYPTO_SERVICES
            - ACTIVITY_FINANCIAL_INSTITUTION
            - ACTIVITY_OTHER
        fundOrigin:
          description: The code representing the origins of the company's funds.
          type: string
          example: FUND_ORIGIN_REVENUE_OPERATIONS
          enum:
            - FUND_ORIGIN_REVENUE_OPERATIONS
            - FUND_ORIGIN_PROFIT_DIVIDENDS
            - FUND_ORIGIN_LOAN
            - FUND_ORIGIN_INVESTMENTS_SHAREHOLDERS
            - FUND_ORIGIN_CUSTOMER_FUNDS
            - FUND_ORIGIN_THIRD_PARTY_FUNDS
        monthlyTurnover:
          description: The code representing the company's monthly turnover range.
          type: string
          example: TURNOVER_UNDER_100K
          enum:
            - TURNOVER_UNDER_100K
            - TURNOVER_100K_TO_250K
            - TURNOVER_OVER_250K
        monthlyTransactionCount:
          description: The code representing the number of transactions the company typically makes each month.
          type: string
          example: TRANSACTION_COUNT_UNDER_100
          enum:
            - TRANSACTION_COUNT_UNDER_100
            - TRANSACTION_COUNT_100_TO_250
            - TRANSACTION_COUNT_OVER_250
      required:
        - service
        - purpose
        - activity
        - fundOrigin
        - monthlyTurnover
        - monthlyTransactionCount
    CorporateVerifications:
      description: |
        A list of verifications required for corporate onboarding. Each type of verification in the list must be submitted to ensure compliance.
        Verification can have multiple documents (e.g. two sides of an ID document, selfie).
        The same file ID can be referenced in multiple verifications (e.g. the same document contains company's name and address).

        The types of verifications include:
        - **corporateName**: A document proving the company's legal name.
        - **corporateAddress**: A document proving the company's registered address.
        - **registrationNumber**: A document proving the company's registration number.
        - **dateOfRegistration**: A document proving the company's registration date.
        - **beneficialOwnership**: A document identifying individuals with significant control over the company.
        - **powerOfAttorney**: A document granting authority to act on behalf of the company.
      type: array
      items:
        type: object
        properties:
          kind:
            type: string
            enum:
              - corporateName
              - corporateAddress
              - registrationNumber
              - dateOfRegistration
              - beneficialOwnership
              - powerOfAttorney
              - enhancedDueDiligence
          documents:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                kind:
                  type: string
                  enum:
                    - companyPDF
                side:
                  type: string
                  enum:
                    - back
                    - front
                fileId:
                  $ref: "#/components/schemas/UUID"
              required:
                - name
                - kind
                - fileId
        required:
          - kind
          - documents
    IdDocument:
      description: Details of the ID document used to verify the person's identity.
      type: object
      properties:
        number:
          description: The document number.
          type: string
          example: A1234566788
        kind:
          description: |
            The type of ID document. Passports and National ID cards are supported.

            The ID document must verify the person's name, birthday, and nationality.
          type: string
          example: passport
          enum:
            - passport
            - nationalIdentityCard
      required:
        - number
        - kind
    ProfileState:
      description: |
        The state of the profile lifecycle:

        * `created`: The profile has been created but no details have been submitted.
        * `pending`: The details have been submitted and are being processed.
        * `approved`: The profile is active and all Monerium services are supported.
        * `rejected`: The applicant details did not meet the compliance requirements of Monerium. Details can be fixed and re-submitted for processing.
        * `blocked`: Monerium is unable to offer the applicant services because of compliance reasons. Details cannot be re-submitted.
      type: string
      example: pending
      enum:
        - created
        - pending
        - approved
        - rejected
        - blocked
    ProfileKind:
      description: String identifier specifying the type of the profile.
      type: string
      example: personal
      enum:
        - corporate
        - personal
    ProfileSummary:
      type: object
      properties:
        id:
          description: Unique identifier of the profile. The Profile ID is the
            main identifier used to represent ownership of other API resources.
          "$ref": "#/components/schemas/UUID"
          example: 4f079ef8-6d26-11eb-9bc8-acde48001122
        kind:
          description: String identifier specifying the type of the profile.
          type: string
          enum:
            - corporate
            - personal
          example: corporate
        name:
          description: The Profile name. This can be a corporate or an individual.
          type: string
          example: user@example.com
        perms:
          description: List containing the different identifiers specifying
            the permission the user has on the profile.
          type: array
          items:
            type: string
            enum:
              - read
              - write
    TimeStamp:
      description: "The timestamp in [RFC3339](https://tools.ietf.org/html/rfc3339) format. It includes the date, time to the second, and optional fractional seconds, followed by 'Z' to indicate UTC time."
      type: string
      format: date-time
      example: "2024-07-29T12:21:58.777884Z"
      pattern: '^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$'
    UserContext:
      type: object
      properties:
        userId:
          description: Unique identifier of the User.
          "$ref": "#/components/schemas/UUID"
        email:
          description: An email address associated with the account.
          type: string
          format: email
          example: user@example.com
        name:
          description: The user name or alias. You can treat this as metadata.
          type: string
          example: user@example.com
        roles:
          description: List of Role
          type: array
          items:
            type: string
            enum:
              - admin
          default: []
        auth:
          description: Information about how the user was authenticated.
          type: object
          properties:
            method:
              description: The authentication method.
              enum:
                - password
                - resource
                - jwt
                - apikey
                - bearer
              type: string
              example: password
            subject:
              description:
                Identifier used during the authentication. The identifier
                used changes with the authentication method. When authenticated as
                a partner, the partnerID will be used. When using oauth, the client_id
                will be used.
              type: string
              example: user@example.com
            verified:
              description: Boolean set to true after email address confirmation.
              type: boolean
              example: true
        defaultProfile:
          description:
            Unique identifier of the default profile. The default profile
            allows the API consumer to use the simpler API endpoints omitting the
            profile ID from the structure.
          example: 4f079ef8-6d26-11eb-9bc8-acde48001122
          "$ref": "#/components/schemas/UUID"
        profiles:
          type: array
          description:
            List containing information about every profiles accessible
            to the User.
          items:
            "$ref": "#/components/schemas/ProfileSummary"
    WebhookSubscription:
      type: object
      properties:
        id:
          description: Unique identifier of the webhook subscription.
          "$ref": "#/components/schemas/UUID"
        url:
          description: The URL to which the webhook events will be sent.
          type: string
          format: uri
          example: "https://example.com/webhook"
        types:
          description: List of event types that trigger the webhook.
          type: array
          example:
            - iban.updated
            - profile.updated
        state:
          description: The state of the webhook subscription.
          type: string
          enum:
            - active
            - inactive
          example: active
      required:
        - id
        - url
        - types
        - state
    PendingSignature:
      type: object
      required:
        - kind
        - chain
        - address
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: Order ID (only present for order kind signatures)
          example: "550e8400-e29b-41d4-a716-446655440000"
        kind:
          type: string
          enum:
            - linkAddress
            - order
          description: The type of signature request
          example: "order"
        chain:
          description: The blockchain network name
          $ref: "#/components/schemas/Chain"
        address:
          description: The blockchain address requiring signature
          $ref: "#/components/schemas/Address"
        amount:
          type: string
          description: Monetary amount as a decimal string (only present for order kind signatures)
          example: "100.50"
        counterpart:
          description: Payment counterpart information (only present for order kind signatures)
          $ref: "#/components/schemas/CounterpartResponse"
        currency:
          description: Currency code (only present for order kind signatures)
          $ref: "#/components/schemas/Currency"
        createdAt:
          description: Timestamp when the signature request was created
          $ref: "#/components/schemas/TimeStamp"
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Use the access token obtained from the `/auth/token` endpoint.
        Example:
        ```
        Authorization: Bearer EoWmpc2uSZar6h2bKgh
        ```
tags:
  - name: start
    x-displayName: Getting started
    description: |
      Monerium offers a sandbox test environment for developers to integrate and test their applications:

        - **Sandbox API URL:** `https://api.monerium.dev`
        - **Sandbox web app:** `https://sandbox.monerium.dev`

        Before onboarding users via your application, you must [register your application](/getting-started#setup) with Monerium.

        When you are ready to go live, then you can register your application in our production environment:

        - **Production API URL:** `https://api.monerium.app`
        - **Production web app:** `https://monerium.app`

        To access the version 2 of the Monerium API, you may need to specify the Accept header in your requests.
        This header ensures that you are using the correct version of the API. See the endpoint documentation for details where this is required.
        The Accept header must have the value `application/vnd.monerium.api-v2+json`.
        Below are examples using curl and JavaScript (Fetch API).

        ```bash
          curl -X GET 'https://api.monerium.dev/profiles' \
            -H 'Accept: application/vnd.monerium.api-v2+json' \
            -H 'Authorization: Bearer YOUR_ACCESS_TOKEN'
        ```

        ```js
          fetch('https://api.monerium.dev/profiles', {
            method: 'GET',
            headers: {
              'Accept': 'application/vnd.monerium.api-v2+json',
              'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
            }
          })
          .then(response => response.json())
          .then(data => console.log(data))
          .catch(error => console.error('Error:', error));
        ```

      ### Authentication context

      The difference between V1 and V2 API is how the endpoints handle the caller identity. In V2 most endpoints take the profile ID from the authentication context, meaning that when client credentials are used
      the requests are returning data for the application user profile. In order to fetch data for other authorized profiles the caller can set the profile UUID value in the request arguments.
      See specific endpoint documentation for details.

      ### Extra privileges

      Some endpoints are marked with the following label:

      <span style="display: inline-block;padding: 2px 8px;margin: 0px;background-color: rgb(44, 108, 167);color: rgb(255, 255, 255);vertical-align: middle;line-height: 1.6;border-radius: 4px;font-weight: 600;font-size: 12px;">
          Requires extra privileges
      </span>

      Access to these endpoints need to be granted to your app by the Monerium team.

      Monerium can offer applicable partners a KYC reliance or sharing agreement that can streamline the onboarding process for its customers.
      It is worth noting that Monerium is always ultimately responsible for conducting due diligence and monitoring the business relationship.
      If you are interested in such capabilities, please contact us in our [discord channel](https://monerium.com/invite/discord).

  - name: auth
    x-displayName: Authentication
    description: "Endpoints that handle user creation, authorization, and authentication."
  - name: profiles
    x-displayName: Profiles
    description: "Customers are represented by profiles whose identifier is the profile ID created at [sign up](#operation/auth-signup). The profile can be either personal or corporate. A profile owns most resources, such as IBANs and addresses."
  - name: addresses
    x-displayName: Addresses
    description: "A blockchain address, often called a public key or wallet address, is a unique identifier within a blockchain that serves as a destination for sending, receiving, or storing digital assets, such as the EURe onchain fiat token."
  - name: ibans
    x-displayName: IBANs
    description: "Monerium connects any web3 wallet to any euro bank account with a personal IBAN. All incoming euro payments are automatically minted as EURe tokens to the linked address. Sending EURe to traditional bank accounts is just as easy. With a signature from the wallet, the EURe is burned and sent as a euro to any bank account from the IBAN that is linked to the address."
  - name: orders
    x-displayName: Orders
    description: |
      An order represents an instruction to transfer funds to and from a wallet address.
      The transfer can occur either within the blockchain ecosystem (cross-chain) or between the blockchain address and a traditional bank account via SEPA.
  - name: signatures
    x-displayName: Signatures
    description: |
      Fetch pending signature requests for linking addresses and approving orders.
  - name: files
    x-displayName: Files
    description: Share files with Monerium.
  - name: webhooks
    x-displayName: Webhooks
    description: |
      Receive notifications with webhooks.

      # Signatures

      Each webhook request includes the following headers:
      - `webhook-id`: Unique identifier of the webhook event.
      - `webhook-timestamp`: Timestamp of the webhook event in seconds since epoch.
      - `webhook-signature`: HMAC signature of the webhook payload.

      The signature is computed using the following formula:

      ```
      envelope = webhook-id.webhook-timestamp.payload
      signature = base64Encode(HMAC-SHA256(envelope, secret))
      webhook-signature = v1,signature
      ```

      As an example, if the webhook ID is `3f3d820e-d01c-4c56-8be4-b20053225679`, the timestamp is `1745118540`, and the payload is:
      ```json
      {"type":"subscription.created","timestamp":"2024-08-09T12:44:04.777884Z"}
      ```
      then the signature sent in the `webhook-signature` header for a secret `whsec_mUt3nH+3wx/djdHf8RHn9yJMMiAhq10b` is: `v1,4gOAiajJT7ah++XpDFdRyK/TJ75whRjUcKOWnvsHNlk=`

      Please note that the payload  must be used exactly as it was received, without any modifications or formatting changes as any changes will result in a different signature.

  - name: changes
    x-displayName: Changelog
    description: |
      ### 2026-02-20:
      * Fix links for new UI
      * Linting

      ### 2026-02-17:
      * Removed `skip_create_account` from Athorization endpoint query parameters as it is no longer used in the flow. Use the Link Address and Request IBAN endpoints instead.
      * Enabled KYC testing in the Authorization flow. By default the `skip_kyc` parameter is `false`.


      ### 2026-02-02:
      * Add missing 202 Status for Order creation endpoint.
      * Add /signatures documentation to fetch pending signature requests.

      ### 2026-01-22:
      * Base chain supported.

      ### 2025-11-14:
      * Orders now support the `referenceNumber` field for structured SEPA reference info (max 35 characters). The field is available in the [POST /place-order](#operation/post-orders) request, [GET /order/{id}](#operation/order) and [GET /orders](#operation/orders) responses, as well as in order webhooks.
      * WIP Order memo field - Effective 15th of December, the `memo` field in incoming SEPA payments will hold only unstructured remittance text. Structured reference will be provided exclusively in the `referenceNumber` field. Please ensure your integration uses `referenceNumber` for structured references before this change takes effect.

      ### 2025-07-17:
      * Noble testnet chain identifier is now `grand`, previously `noble`.
      * Noble chain identifier, `noble`, documented.
      * Linea and Linea Sepolia chain identifiers, `linea` and `lineasepolia` documented.

      ### 2024-11-11:
      * [GET/POST  /auth](#operation/auth) changes to query parameters.
          * added `email`: You can prefill the email field for login and sign up steps to ensure the user uses the correct email.
          * added `skip_kyc`: You can skip the KYC onboarding steps in the Authorization Flow and use the the details, additional data, and verifications API endpoints after you have gotten the authorization.
          * changed `skip_create_account`: changed skipCreateAccount to snake case for consistency.

      ### 2024-10-22:
      * WIP [GET /orders](#operation/orders) -  We're updating the orders response to return an object with an orders key containing an array of all orders.
        This new structure makes it easier to handle pagination and extend the response with additional metadata in the future.
        We plan to release this upgrade within 5th of November.

      ### 2024-10-07:
      * [POST /orders](#operation/post-orders) - Introduced a short format IBAN in the message.

      ### 2024-10-04:
      * [Webhook for Subscription notification](#operation/webhook-profile-updated) - A notification that is used to validate if webhook receiver can handle further notifications.
      * [PUT /profiles/{profile}/form](#operation/submit-profile-form) - profile form is extracted from profile details into a separate endpoint.
      * [PUT /profiles/{profile}/verifications](#operation/submit-profile-verifications) - profile verifications is extracted from profile details into a separate endpoint.
      * Arbitrum and Arbitrum Sepolia chains supported.

      ### 2024-09-27
      * [GET /balances](#operation/balances) - added a new endpoint to retrieve the account balances. Removed the deprecated `GET /profiles/{profile}/balances` endpoint.

      ### 2024-09-09
      * [POST /auth](#operation/auth) - removed required `version=v2` argument from the request. Clarified required parameters
      for the oauth flow.

      ### 2024-08-30
      * [POST /auth](#operation/auth) - added required `version=v2` and Sign in with Ethereum (SIWE) flow.

      ### 2024-08-19:
      * [PUT /profiles/{profile}/details](#operation/submit-profile-details) - added form and verifications for personal and corporate profiles (WIP).

      ### 2024-08-09:
      * [POST /webhooks](#operation/create-subscription) - A new endpoint to register webhook subscription and receive notifications like profile updates.
      * [Webhook for Profile notifications](#operation/webhook-profile-updated) - A webhook notification about profile updates.

      ### 2024-07-15:

      * [PATCH /ibans/{iban}](#operation/move-iban) - Changed from PUT to PATCH request.
      * [PUT /profiles/{profile}/details](#operation/submit-profile-details) - added 409 response when submitting details for an already approved profile.

      ### 2024-06-20:
      * [POST /auth/signup](#operation/auth-signup) - Added a 304 response when trying to sign up existing users. This will require explicit authorization from the user using the authorization flow.
      * [PUT /ibans/{iban}](#operation/move-iban) - New endpoint released to move existing IBANs to another wallet address.
webhooks:
  subscription.created:
    post:
      operationId: webhook-subscription-created
      summary: Subscription created
      description: |
        This notification is used to validate if receiver is able to handle webhook notifications.
        Your webhook endpoint must respond with a `200 OK` status code to indicate successful receipt.
        If the delivery fails, the subscription won't be created.

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The type of the event.
                  type: string
                  example: subscription.created
                  enum:
                    - subscription.created
                timestamp:
                  $ref: "#/components/schemas/TimeStamp"
      responses:
        "200":
          description: Webhook received successfully
      security: []
      tags:
        - webhooks
      x-codeSamples:
        - lang: curl4
          label: CURL
          source: |
            curl -X POST "https://your-webhook-url.com/webhooks" \
            -H "Content-Type: application/json" \
            -H "webhook-id: 3f3d820e-d01c-4c56-8be4-b20053225679" \
            -H "webhook-timestamp: 1723207444" \
            -H "webhook-signature: v1,K5oZfzN95Z9UVu1EsfQmfVNQhnkZ2pj9o9NDN/H/pI4=" \
            -d '{
              "type": "subscription.created",
              "timestamp": "2024-08-09T12:44:04.777884Z"
            }'

  order.created:
    post:
      operationId: webhook-order-created
      summary: Order created
      description: |
        This notification represents an order creation.

        It's send as a POST request to the endpoint specified during [subscription creation](#operation/create-subscription).

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The type of the event.
                  type: string
                  example: order.created
                  enum:
                    - order.created
                timestamp:
                  $ref: "#/components/schemas/TimeStamp"
                data:
                  $ref: "#/components/schemas/Order"
      responses:
        "200":
          description: Webhook received successfully
      security: []
      tags:
        - webhooks

  order.updated:
    post:
      operationId: webhook-order-updated
      summary: Order updated
      description: |
        This notification represents an order update event. It's sent when an order is processed or rejected.

        It's send as a POST request to the endpoint specified during [subscription creation](#operation/create-subscription).

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The type of the event.
                  type: string
                  example: order.updated
                  enum:
                    - order.updated
                timestamp:
                  $ref: "#/components/schemas/TimeStamp"
                data:
                  $ref: "#/components/schemas/Order"
      responses:
        "200":
          description: Webhook received successfully
      security: []
      tags:
        - webhooks

  profile.updated:
    post:
      operationId: webhook-profile-updated
      summary: Profile updated
      description: |
        This notification represents a profile's state update.

        It's send as a POST request to the endpoint specified during [subscription creation](#operation/create-subscription).

        The cURL example contain the example payload and headers that are sent.
        Headers description:
        - `webhook-id`: unique ID of webhook notification.
        - `webhook-timestamp`: UNIX timestamp of webhook notification.
        - `webhook-signature`: signature is a minified JSON payload encrypted using the secret key via the HMAC-SHA256 scheme, prefixed with "v1,".

        Your webhook endpoint must respond with a `200 OK` status code to indicate successful receipt.
        If the delivery fails, Monerium will retry with exponential backoff up to 10 times over 12 hours.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The type of the event.
                  type: string
                  example: profile.updated
                  enum:
                    - profile.updated
                timestamp:
                  $ref: "#/components/schemas/TimeStamp"
                data:
                  $ref: "#/components/schemas/Profile"
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
        "500":
          description: Internal Server Error
      security: []
      tags:
        - webhooks
      x-codeSamples:
        - lang: curl4
          label: CURL
          source: |
            curl -X POST "https://your-webhook-url.com/webhooks" \
            -H "Content-Type: application/json" \
            -H "webhook-id: 3f3d820e-d01c-4c56-8be4-b20053225679" \
            -H "webhook-timestamp: 1723207444" \
            -H "webhook-signature: v1,K5oZfzN95Z9UVu1EsfQmfVNQhnkZ2pj9o9NDN/H/pI4=" \
            -d '{
              "type": "profile.updated",
              "timestamp": "2024-08-09T12:44:04.777884Z",
              "data": {
                "id": "4f079ef8-6d26-11eb-9bc8-acde48001122",
                "kind": "personal",
                "name": "Jane Doe",
                "state": "pending"
              }
            }'

  iban.updated:
    post:
      operationId: webhook-iban-updated
      summary: IBAN updated
      description: |
        This notification represents an IBAN update.

        It's send as a POST request to the endpoint specified during [subscription creation](#operation/create-subscription).

        The cURL example contain the example payload and headers that are sent.
        Headers description:
        - `webhook-id`: unique ID of webhook notification.
        - `webhook-timestamp`: UNIX timestamp of webhook notification.
        - `webhook-signature`: signature is a minified JSON payload encrypted using the secret key via the HMAC-SHA256 scheme, prefixed with "v1,".

        Your webhook endpoint must respond with a `200 OK` status code to indicate successful receipt.
        If the delivery fails, Monerium will retry with exponential backoff up to 10 times over 12 hours.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  description: The type of the event.
                  type: string
                  example: iban.updated
                  enum:
                    - iban.updated
                timestamp:
                  $ref: "#/components/schemas/TimeStamp"
                data:
                  $ref: "#/components/schemas/IBANObject"
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
        "500":
          description: Internal Server Error
      security: []
      tags:
        - webhooks
      x-codeSamples:
        - lang: curl4
          label: CURL
          source: |
            curl -X POST "https://your-webhook-url.com/webhooks" \
            -H "Content-Type: application/json" \
            -H "webhook-id: 3f3d820e-d01c-4c56-8be4-b20053225679" \
            -H "webhook-timestamp: 1723207444" \
            -H "webhook-signature: v1,K5oZfzN95Z9UVu1EsfQmfVNQhnkZ2pj9o9NDN/H/pI4=" \
            -d '{
              "type": "iban.updated",
              "timestamp": "2024-08-09T12:44:04.777884Z",
              "data": {
                  "iban": "IS53 5615 1329 5713 7808 3320 63",
                  "chain": "ethereum",
                  "address": "0x2031c090b74352227bDD0AF8E1e5F5aD1Af31062",
                  "profile": "0bbc7d54-87de-11ef-8b78-7e558e00ec92",
                  "state": "approved"
              }
            }'
